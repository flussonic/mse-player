!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FlussonicMsePlayer=t():e.FlussonicMsePlayer=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=37)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);r.__exportStar(n(63),t),r.__exportStar(n(25),t),r.__exportStar(n(64),t),r.__exportStar(n(11),t),r.__exportStar(n(66),t),r.__exportStar(n(5),t),r.__exportStar(n(12),t),r.__exportStar(n(27),t),r.__exportStar(n(6),t),r.__exportStar(n(13),t),r.__exportStar(n(26),t),r.__exportStar(n(68),t),r.__exportStar(n(69),t),r.__exportStar(n(15),t),r.__exportStar(n(14),t),r.__exportStar(n(28),t),r.__exportStar(n(29),t),r.__exportStar(n(70),t)},function(e,t,n){(function(n){var r,o,i,s,a,u,c,l,p,d,h,f,v,g,_,y,m,b,S,E,w,O,x,T;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */!function(k){var j="object"==typeof n?n:"object"==typeof self?self:"object"==typeof this?this:{};function M(e,t){return e!==j&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,r){return e[n]=t?t(n,r):r}}void 0===(r=function(e){var t,n;t=M(j,M(e)),n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},o=function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},a=function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},u=function(e,t){return function(n,r){t(n,r,e)}},c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},p=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},T=function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},d=function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])},h=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},v=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e},g=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},_=function(e){return this instanceof _?(this.v=e,this):new _(e)},y=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=o[e](t)).value instanceof _?Promise.resolve(n.value.v).then(u,c):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}},m=function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:o?o(t):t}:o}},b=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,o,(t=e[n](t)).done,t.value)}))}}},S=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},w=function(e){return e&&e.__esModule?e:{default:e}},O=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},x=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},t("__extends",o),t("__assign",i),t("__rest",s),t("__decorate",a),t("__param",u),t("__metadata",c),t("__awaiter",l),t("__generator",p),t("__exportStar",d),t("__createBinding",T),t("__values",h),t("__read",f),t("__spread",v),t("__spreadArrays",g),t("__await",_),t("__asyncGenerator",y),t("__asyncDelegator",m),t("__asyncValues",b),t("__makeTemplateObject",S),t("__importStar",E),t("__importDefault",w),t("__classPrivateFieldGet",O),t("__classPrivateFieldSet",x)}.apply(t,[t]))||(e.exports=r)}()}).call(this,n(8))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(56);t.LogLevel=r.LogLevel;var o=n(57);t.SessionStatus=o.SessionStatus,t.RequestSessionStatus=o.RequestSessionStatus;var i=n(58);t.Severity=i.Severity;var s=n(59);t.Status=s.Status;var a=n(60);t.TransactionSamplingMethod=a.TransactionSamplingMethod;var u=n(61);t.Outcome=u.Outcome},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(62);t.addBreadcrumb=r.addBreadcrumb,t.captureException=r.captureException,t.captureEvent=r.captureEvent,t.captureMessage=r.captureMessage,t.configureScope=r.configureScope,t.startTransaction=r.startTransaction,t.setContext=r.setContext,t.setExtra=r.setExtra,t.setExtras=r.setExtras,t.setTag=r.setTag,t.setTags=r.setTags,t.setUser=r.setUser,t.withScope=r.withScope;var o=n(4);t.addGlobalEventProcessor=o.addGlobalEventProcessor,t.getCurrentHub=o.getCurrentHub,t.getHubFromCarrier=o.getHubFromCarrier,t.Hub=o.Hub,t.makeMain=o.makeMain,t.Scope=o.Scope;var i=n(72);t.API=i.API;var s=n(73);t.BaseClient=s.BaseClient;var a=n(75);t.BaseBackend=a.BaseBackend;var u=n(76);t.eventToSentryRequest=u.eventToSentryRequest,t.sessionToSentryRequest=u.sessionToSentryRequest;var c=n(77);t.initAndBind=c.initAndBind;var l=n(32);t.NoopTransport=l.NoopTransport;var p=n(78);t.SDK_VERSION=p.SDK_VERSION;var d=n(79);t.Integrations=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(24);t.addGlobalEventProcessor=r.addGlobalEventProcessor,t.Scope=r.Scope;var o=n(30);t.Session=o.Session;var i=n(71);t.SessionFlusher=i.SessionFlusher;var s=n(31);t.getActiveDomain=s.getActiveDomain,t.getCurrentHub=s.getCurrentHub,t.getHubFromCarrier=s.getHubFromCarrier,t.getMainCarrier=s.getMainCarrier,t.Hub=s.Hub,t.makeMain=s.makeMain,t.setHubOnCarrier=s.setHubOnCarrier},function(e,t){function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function r(e,t){try{return e instanceof t}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isError=function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return r(e,Error)}},t.isErrorEvent=function(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)},t.isDOMError=function(e){return"[object DOMError]"===Object.prototype.toString.call(e)},t.isDOMException=function(e){return"[object DOMException]"===Object.prototype.toString.call(e)},t.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},t.isPrimitive=function(e){return null===e||"object"!=typeof e&&"function"!=typeof e},t.isPlainObject=n,t.isEvent=function(e){return"undefined"!=typeof Event&&r(e,Event)},t.isElement=function(e){return"undefined"!=typeof Element&&r(e,Element)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isThenable=function(e){return Boolean(e&&e.then&&"function"==typeof e.then)},t.isSyntheticEvent=function(e){return n(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e},t.isInstanceOf=r},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=n(14),i={};function s(){return r.isNodeEnv()?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:i}t.getGlobalObject=s,t.uuid4=function(){var e=s(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.parseUrl=function(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}},t.getEventDescription=function(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"},t.consoleSandbox=function(e){var t=s();if(!("console"in t))return e();var n=t.console,r={};["debug","info","warn","error","log","assert"].forEach((function(e){e in t.console&&n[e].__sentry_original__&&(r[e]=n[e],n[e]=n[e].__sentry_original__)}));var o=e();return Object.keys(r).forEach((function(e){n[e]=r[e]})),o},t.addExceptionTypeValue=function(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error"},t.addExceptionMechanism=function(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach((function(n){e.exception.values[0].mechanism[n]=t[n]}))}catch(e){}},t.getLocationHref=function(){var e=s();try{return e.document.location.href}catch(e){return""}};var a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;t.parseSemver=function(e){var t=e.match(a)||[],n=parseInt(t[1],10),r=parseInt(t[2],10),o=parseInt(t[3],10);return{buildmetadata:t[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(o)?void 0:o,prerelease:t[4]}};t.parseRetryAfterHeader=function(e,t){if(!t)return 6e4;var n=parseInt(""+t,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+t);return isNaN(r)?6e4:r-e},t.addContextToFrame=function(e,t,n){void 0===n&&(n=5);var r=t.lineno||0,i=e.length,s=Math.max(Math.min(i,r-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map((function(e){return o.snipLine(e,0)})),t.context_line=o.snipLine(e[Math.min(i-1,s)],t.colno||0),t.post_context=e.slice(Math.min(s+1,i),s+1+n).map((function(e){return o.snipLine(e,0)}))},t.stripUrlQueryAndFragment=function(e){return e.split(/[\?#]/,1)[0]}}).call(this,n(8))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(0),s=i.getGlobalObject(),a=0;function u(){a+=1,setTimeout((function(){a-=1}))}t.shouldIgnoreOnError=function(){return a>0},t.ignoreNextOnError=u,t.wrap=function e(t,n,s){if(void 0===n&&(n={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch(e){return t}var a=function(){var a=Array.prototype.slice.call(arguments);try{s&&"function"==typeof s&&s.apply(this,arguments);var c=a.map((function(t){return e(t,n)}));return t.handleEvent?t.handleEvent.apply(this,c):t.apply(this,c)}catch(e){throw u(),o.withScope((function(t){t.addEventProcessor((function(e){var t=r.__assign({},e);return n.mechanism&&(i.addExceptionTypeValue(t,void 0,void 0),i.addExceptionMechanism(t,n.mechanism)),t.extra=r.__assign(r.__assign({},t.extra),{arguments:a}),t})),o.captureException(e)})),e}};try{for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(a[c]=t[c])}catch(e){}t.prototype=t.prototype||{},a.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:a}),Object.defineProperties(a,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(a,"name").configurable&&Object.defineProperty(a,"name",{get:function(){return t.name}})}catch(e){}return a},t.injectReportDialog=function(e){if(void 0===e&&(e={}),s.document)if(e.eventId)if(e.dsn){var t=s.document.createElement("script");t.async=!0,t.src=new o.API(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(t.onload=e.onLoad);var n=s.document.head||s.document.body;n&&n.appendChild(t)}else i.logger.error("Missing dsn option in showReportDialog call");else i.logger.error("Missing eventId option in showReportDialog call")}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.enableLogs=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(49);function i(){}var s={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=s;function u(e,t){return t="["+e+"] > "+t}var c=(0,o.getSelfScope)();function l(e){var t=c.console[e];return t?function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];r[0]&&(r[0]=u(e,r[0])),t.apply(c.console,r)}:i}t.enableLogs=function(e){if(!0===e||"object"===(void 0===e?"undefined":r(e))){!function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){a[t]=e[t]?e[t].bind(e):l(t)}))}(e,"trace","debug","log","info","warn","error");try{a.log()}catch(e){a=s}}else a=s},t.logger=a},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(65),i=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return r.message=t,r.name=n.prototype.constructor.name,o.setPrototypeOf(r,n.prototype),r}return r.__extends(t,e),t}(Error);t.SentryError=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=r.getGlobalObject(),i="Sentry Logger ",s=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&r.consoleSandbox((function(){o.console.log(i+"[Log]: "+e.join(" "))}))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&r.consoleSandbox((function(){o.console.warn(i+"[Warn]: "+e.join(" "))}))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&r.consoleSandbox((function(){o.console.error(i+"[Error]: "+e.join(" "))}))},e}();o.__SENTRY__=o.__SENTRY__||{};var a=o.__SENTRY__.logger||(o.__SENTRY__.logger=new s);t.logger=a},function(e,t,n){(function(e,n){function r(e,t){return e.require(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeEnv=function(){return"[object process]"===Object.prototype.toString.call(void 0!==e?e:0)},t.dynamicRequire=r,t.loadModule=function(e){var t;try{t=r(n,e)}catch(e){}try{var o=r(n,"process").cwd;t=r(n,o()+"/node_modules/"+e)}catch(e){}return t}}).call(this,n(67),n(10)(e))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.truncate=function(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."},t.snipLine=function(e,t){var n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);var o=Math.max(t-60,0);o<5&&(o=0);var i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n="'{snip} "+n),i<r&&(n+=" {snip}"),n},t.safeJoin=function(e,t){if(!Array.isArray(e))return"";for(var n=[],r=0;r<e.length;r++){var o=e[r];try{n.push(String(o))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)},t.isMatchingPattern=function(e,t){return!!r.isString(e)&&(r.isRegExp(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t))}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.getFunctionName=function(e){try{return e&&"function"==typeof e&&e.name||"<anonymous>"}catch(e){return"<anonymous>"}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(2),i=n(0),s=n(34),a=n(17);function u(e,t,n){var o;if(void 0===n&&(n={}),i.isErrorEvent(e)&&e.error)return e=e.error,o=s.eventFromStacktrace(a.computeStackTrace(e));if(i.isDOMError(e)||i.isDOMException(e)){var u=e,l=u.name||(i.isDOMError(u)?"DOMError":"DOMException"),p=u.message?l+": "+u.message:l;return o=c(p,t,n),i.addExceptionTypeValue(o,p),"code"in u&&(o.tags=r.__assign(r.__assign({},o.tags),{"DOMException.code":""+u.code})),o}if(i.isError(e))return o=s.eventFromStacktrace(a.computeStackTrace(e));if(i.isPlainObject(e)||i.isEvent(e)){var d=e;return o=s.eventFromPlainObject(d,t,n.rejection),i.addExceptionMechanism(o,{synthetic:!0}),o}return o=c(e,t,n),i.addExceptionTypeValue(o,""+e,void 0),i.addExceptionMechanism(o,{synthetic:!0}),o}function c(e,t,n){void 0===n&&(n={});var r={message:e};if(n.attachStacktrace&&t){var o=a.computeStackTrace(t),i=s.prepareFramesForEvent(o.stack);r.stacktrace={frames:i}}return r}t.eventFromException=function(e,t,n){var r=u(t,n&&n.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return i.addExceptionMechanism(r,{handled:!0,type:"generic"}),r.level=o.Severity.Error,n&&n.event_id&&(r.event_id=n.event_id),i.SyncPromise.resolve(r)},t.eventFromMessage=function(e,t,n,r){void 0===n&&(n=o.Severity.Info);var s=c(t,r&&r.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),i.SyncPromise.resolve(s)},t.eventFromUnknownInput=u,t.eventFromString=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,i=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,a=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,u=/\((\S*)(?::(\d+))(?::(\d+))\)/,c=/Minified React error #\d+;/i;t.computeStackTrace=function(e){var t=null,n=0;e&&("number"==typeof e.framesToPop?n=e.framesToPop:c.test(e.message)&&(n=1));try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,n=e.stacktrace,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,i=n.split("\n"),s=[],a=0;a<i.length;a+=2){var u=null;(t=r.exec(i[a]))?u={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=o.exec(i[a]))&&(u={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),u&&(!u.func&&u.line&&(u.func="?"),s.push(u))}if(!s.length)return null;return{message:d(e),name:e.name,stack:s}}(e))return p(t,n)}catch(e){}try{if(t=function(e){var t,n;if(!e||!e.stack)return null;for(var c,p,h,f=[],v=e.stack.split("\n"),g=0;g<v.length;++g){if(p=o.exec(v[g])){var _=p[2]&&0===p[2].indexOf("native");p[2]&&0===p[2].indexOf("eval")&&(c=u.exec(p[2]))&&(p[2]=c[1],p[3]=c[2],p[4]=c[3]);var y=p[2]&&0===p[2].indexOf("address at ")?p[2].substr("address at ".length):p[2],m=p[1]||"?";t=r.__read(l(m,y),2),m=t[0],y=t[1],h={url:y,func:m,args:_?[p[2]]:[],line:p[3]?+p[3]:null,column:p[4]?+p[4]:null}}else if(p=s.exec(v[g]))h={url:p[2],func:p[1]||"?",args:[],line:+p[3],column:p[4]?+p[4]:null};else{if(!(p=i.exec(v[g])))continue;p[3]&&p[3].indexOf(" > eval")>-1&&(c=a.exec(p[3]))?(p[1]=p[1]||"eval",p[3]=c[1],p[4]=c[2],p[5]=""):0!==g||p[5]||void 0===e.columnNumber||(f[0].column=e.columnNumber+1);y=p[3],m=p[1]||"?";n=r.__read(l(m,y),2),m=n[0],y=n[1],h={url:y,func:m,args:p[2]?p[2].split(","):[],line:p[4]?+p[4]:null,column:p[5]?+p[5]:null}}!h.func&&h.line&&(h.func="?"),f.push(h)}if(!f.length)return null;return{message:d(e),name:e.name,stack:f}}(e))return p(t,n)}catch(e){}return{message:d(e),name:e&&e.name,stack:[],failed:!0}};var l=function(e,t){var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:"?",n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]};function p(e,t){try{return r.__assign(r.__assign({},e),{stack:e.stack.slice(t)})}catch(t){return e}}function d(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(2),s=n(0),a=n(36),u={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},c=s.getGlobalObject(),l=function(){function e(e){var t=this;this.options=e,this._buffer=new s.PromiseBuffer(30),this._rateLimits={},this._outcomes={},this._api=new o.API(e.dsn,e._metadata,e.tunnel),this.url=this._api.getStoreEndpointWithUrlEncodedAuth(),this.options.sendClientReports&&c.document&&c.document.addEventListener("visibilitychange",(function(){"hidden"===c.document.visibilityState&&t._flushOutcomes()}))}return e.prototype.sendEvent=function(e){throw new s.SentryError("Transport Class has to implement `sendEvent` method")},e.prototype.close=function(e){return this._buffer.drain(e)},e.prototype.recordLostEvent=function(e,t){var n;if(this.options.sendClientReports){var r=u[t]+":"+e;s.logger.log("Adding outcome: "+r),this._outcomes[r]=(null!=(n=this._outcomes[r])?n:0)+1}},e.prototype._flushOutcomes=function(){if(this.options.sendClientReports){var e=this._outcomes;if(this._outcomes={},Object.keys(e).length){s.logger.log("Flushing outcomes:\n"+JSON.stringify(e,null,2));var t=this._api.getEnvelopeEndpointWithUrlEncodedAuth(),n=JSON.stringify({})+"\n"+JSON.stringify({type:"client_report"})+"\n"+JSON.stringify({timestamp:s.dateTimestampInSeconds(),discarded_events:Object.keys(e).map((function(t){var n=r.__read(t.split(":"),2),o=n[0];return{reason:n[1],category:o,quantity:e[t]}}))});try{a.sendReport(t,n)}catch(e){s.logger.error(e)}}else s.logger.log("No outcomes to flush")}},e.prototype._handleResponse=function(e){var t=e.requestType,n=e.response,r=e.headers,o=e.resolve,a=e.reject,u=i.Status.fromHttpCode(n.status);this._handleRateLimit(r)&&s.logger.warn("Too many "+t+" requests, backing off until: "+this._disabledUntil(t)),u!==i.Status.Success?a(n):o({status:u})},e.prototype._disabledUntil=function(e){var t=u[e];return this._rateLimits[t]||this._rateLimits.all},e.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},e.prototype._handleRateLimit=function(e){var t,n,o,i,a=Date.now(),u=e["x-sentry-rate-limits"],c=e["retry-after"];if(u){try{for(var l=r.__values(u.trim().split(",")),p=l.next();!p.done;p=l.next()){var d=p.value.split(":",2),h=parseInt(d[0],10),f=1e3*(isNaN(h)?60:h);try{for(var v=(o=void 0,r.__values(d[1].split(";"))),g=v.next();!g.done;g=v.next()){var _=g.value;this._rateLimits[_||"all"]=new Date(a+f)}}catch(e){o={error:e}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(o)throw o.error}}}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return!0}return!!c&&(this._rateLimits.all=new Date(a+s.parseRetryAfterHeader(a,c)),!0)},e}();t.BaseTransport=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(85);t.GlobalHandlers=r.GlobalHandlers;var o=n(86);t.TryCatch=o.TryCatch;var i=n(87);t.Breadcrumbs=i.Breadcrumbs;var s=n(88);t.LinkedErrors=s.LinkedErrors;var a=n(89);t.UserAgent=a.UserAgent;var u=n(90);t.Dedupe=u.Dedupe},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var o=self||window;try{try{var i;try{i=new o.Blob([e])}catch(t){(i=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(e),i=i.getBlob()}var s=o.URL||o.webkitURL,a=s.createObjectURL(i),u=new o[t](a,n);return s.revokeObjectURL(a),u}catch(r){return new o[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new o[t](r,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorMsg=t.replaceHttpByWS=t.checkVideoProgress=void 0,t.getMediaSource=o,t.isAndroid=i,t.isSupportedMSE=function(){if(i())return!1;var e=o(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.4d401f,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!r},t.base64ToArrayBuffer=function(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))},t.RawDataToUint8Array=function(e){return new Uint8Array(e)},t.getTrackId=s,t.getRealUtcFromData=a,t.doArrayBuffer=function(e){e.isInit||(this.utc=a(e.data),this.lastLoadedUTC=this.utc)},t.debugData=u,t.pad2=l,t.humanTime=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(e>0))return"";var n=e,r=new Date;r.setTime(1e3*n);var o=!(!1===t),i=o?r.getHours():r.getUTCHours(),s=o?r.getMinutes():r.getUTCMinutes(),a=o?r.getSeconds():r.getUTCSeconds();return l(i)+":"+l(s)+":"+l(a)},t.logDM=function(e,t){t&&r.logger.log("%c "+t.type+" "+("event"===t.type?t.event:"mse_init_segment"),"background: aquamarine;",t)},t.showDispatchError=function(e,t){var n=e.data instanceof ArrayBuffer;r.logger.error(c(e),t),this.media&&this.media.error&&r.logger.error("MediaError:",this.media.error);n&&r.logger.error("Data:",u(e.data));++p>=this.opts.errorsBeforeStop&&(p=0,this.stopPromise=this.stop());this.onError&&this.onError(t,e)};var r=n(9);function o(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}function i(){return-1!==navigator.userAgent.indexOf("Android")}function s(e){return e[47]}function a(e){return(e[92]<<24|e[93]<<16|e[94]<<8|e[95])+(e[96]<<24|e[97]<<16|e[98]<<8|e[99])/1e6}function u(e){var t=new Uint8Array(e);return{trackId:s(t),utc:a(t),view:t}}t.checkVideoProgress=function(e,t){return function(){var n=e.currentTime,o=e.buffered,i=e.buffered.length,s=function(e,t,n){var r=void 0;return function(){var o=this,i=arguments,s=function(){r=null,n||e.apply(o,i)},a=n&&!r;clearTimeout(r),r=setTimeout(s,t),a&&e.apply(o,i)}},a=function(e,t,n,o){try{for(var i=0;i<t.buffered.length;i++){var s=t.buffered.start(i),a=t.buffered.end(i),u=Math.max(s,n),c=Math.min(a,o);if(Math.min(c,a)-u>.5){if(t.updating)return;return t.remove(u,c),!0}}}catch(e){r.logger.warn("removeBufferRange failed",e)}return!1};if(t)for(var u=t.sb.sourceBuffer,c=Object.keys(u),l=n-30,p=c.length-1;p>=0;p--){var d=c[p],h=u[d];if(h){var f=h.buffered;f.length>0&&l>f.start(0)&&s(a(0,h,0,l),100)}}if(t.media.readyState<=2&&2===t.media.networkState?t.onStartStalling():t.media.readyState>2&&t.onEndStalling(),i){var v=o.end(i-1),g=Math.abs(v-n);if(t.playerStatsObject){if(t.playerStatsObject.bytes=t.sb.totalBytesCollected,t.playerStatsObject.updated_at=Date.now(),t.playing){if(t.playbackSegmentStart){var _=t.playerStatsObject.player;if(_){var y=_.playback_duration;y+=t.playerStatsObject.updated_at-t.playbackSegmentStart,t.addPlayerStat("playback_duration",y)}}t.playbackSegmentStart=t.playerStatsObject.updated_at}t.addStat({updated_at:t.playerStatsObject.updated_at,bytes:t.sb.totalBytesCollected})}g<=t.opts.maxBufferDelay||(r.logger.log("nudge",n,"->",i?v:"-",n-v),e.currentTime=v-.2)}}},t.replaceHttpByWS=function(e){return e.replace(/^http/,"ws")};var c=t.errorMsg=function(e){return"Error "+e.name+": "+e.message+"\n"+e.stack};function l(e){return e<=9?"0"+e:""+e}var p=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VIDEO="video",t.AUDIO="audio"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={MEDIA_SOURCE_SOURCE_OPEN:"sourceopen",MEDIA_SOURCE_SOURCE_ENDED:"sourceended",MEDIA_SOURCE_SOURCE_CLOSE:"sourceclose",MEDIA_ELEMENT_PLAY:"play",MEDIA_ELEMENT_PAUSE:"pause",MEDIA_ELEMENT_PROGRESS:"progress",MEDIA_ELEMENT_EMPTIED:"emptied",MEDIA_ELEMENT_SUSPEND:"suspend",MEDIA_ELEMENT_STALLED:"stalled",MEDIA_ELEMENT_WAITING:"waiting",MEDIA_ELEMENT_RATECHANGE:"ratechange",MEDIA_ELEMENT_PLAYING:"playing",WS_OPEN:"open",WS_MESSAGE:"message",WS_ERROR:"error",WS_CLOSE:"close",BUFFER_UPDATE_END:"updateend",BUFFER_ERROR:"onerror",BUFFER_ABORT:"onabort"},e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(0),i=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=r.__spread(t._breadcrumbs),n._tags=r.__assign({},t._tags),n._extra=r.__assign({},t._extra),n._contexts=r.__assign({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=r.__spread(t._eventProcessors),n._requestSession=t._requestSession),n},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.getRequestSession=function(){return this._requestSession},e.prototype.setRequestSession=function(e){return this._requestSession=e,this},e.prototype.setTags=function(e){return this._tags=r.__assign(r.__assign({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var n;return this._tags=r.__assign(r.__assign({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=r.__assign(r.__assign({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var n;return this._extra=r.__assign(r.__assign({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=r.__assign(r.__assign({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e,t,n,r,o=this.getSpan();return(null===(e=o)||void 0===e?void 0:e.transaction)?null===(t=o)||void 0===t?void 0:t.transaction:(null===(r=null===(n=o)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?o.spanRecorder.spans[0]:void 0},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=r.__assign(r.__assign({},this._tags),t._tags),this._extra=r.__assign(r.__assign({},this._extra),t._extra),this._contexts=r.__assign(r.__assign({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):o.isPlainObject(t)&&(t=t,this._tags=r.__assign(r.__assign({},this._tags),t.tags),this._extra=r.__assign(r.__assign({},this._extra),t.extra),this._contexts=r.__assign(r.__assign({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var n="number"==typeof t?Math.min(t,100):100;if(n<=0)return this;var i=r.__assign({timestamp:o.dateTimestampInSeconds()},e);return this._breadcrumbs=r.__spread(this._breadcrumbs,[i]).slice(-n),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){var n;if(this._extra&&Object.keys(this._extra).length&&(e.extra=r.__assign(r.__assign({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=r.__assign(r.__assign({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=r.__assign(r.__assign({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=r.__assign(r.__assign({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=r.__assign({trace:this._span.getTraceContext()},e.contexts);var o=null===(n=this._span.transaction)||void 0===n?void 0:n.name;o&&(e.tags=r.__assign({transaction:o},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=r.__spread(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(r.__spread(s(),this._eventProcessors),e,t)},e.prototype._notifyEventProcessors=function(e,t,n,i){var s=this;return void 0===i&&(i=0),new o.SyncPromise((function(a,u){var c=e[i];if(null===t||"function"!=typeof c)a(t);else{var l=c(r.__assign({},t),n);o.isThenable(l)?l.then((function(t){return s._notifyEventProcessors(e,t,n,i+1).then(a)})).then(null,u):s._notifyEventProcessors(e,l,n,i+1).then(a).then(null,u)}}))},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}();function s(){var e=o.getGlobalObject();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}t.Scope=i,t.addGlobalEventProcessor=function(e){s().push(e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);function o(e,t){var n,o,i,s,a,u,c,l=e,p=[];if(!l||!l.tagName)return"";p.push(l.tagName.toLowerCase());var d=(null===(n=t)||void 0===n?void 0:n.length)?t.filter((function(e){return l.getAttribute(e)})).map((function(e){return[e,l.getAttribute(e)]})):null;if(null===(o=d)||void 0===o?void 0:o.length)d.forEach((function(e){p.push("["+e[0]+'="'+e[1]+'"]')}));else if(l.id&&p.push("#"+l.id),(i=l.className)&&r.isString(i))for(s=i.split(/\s+/),c=0;c<s.length;c++)p.push("."+s[c]);var h=["type","name","title","alt"];for(c=0;c<h.length;c++)a=h[c],(u=l.getAttribute(a))&&p.push("["+a+'="'+u+'"]');return p.join("")}t.htmlTreeAsString=function(e,t){try{for(var n=e,r=[],i=0,s=0,a=" > ".length,u=void 0;n&&i++<5&&!("html"===(u=o(n,t))||i>1&&s+r.length*a+u.length>=80);)r.push(u),s+=u.length,n=n.parentNode;return r.reverse().join(" > ")}catch(e){return"<unknown>"}}},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(25),i=n(5),s=n(27),a=n(15),u=n(14);function c(e){if(i.isError(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}if(i.isEvent(e)){var s=e,a={};a.type=s.type;try{a.target=i.isElement(s.target)?o.htmlTreeAsString(s.target):Object.prototype.toString.call(s.target)}catch(e){a.target="<unknown>"}try{a.currentTarget=i.isElement(s.currentTarget)?o.htmlTreeAsString(s.currentTarget):Object.prototype.toString.call(s.currentTarget)}catch(e){a.currentTarget="<unknown>"}for(var u in"undefined"!=typeof CustomEvent&&i.isInstanceOf(e,CustomEvent)&&(a.detail=s.detail),s)Object.prototype.hasOwnProperty.call(s,u)&&(a[u]=s[u]);return a}return e}function l(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function p(t,n){return"domain"===n&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===n?"[DomainEmitter]":void 0!==e&&t===e?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":i.isSyntheticEvent(t)?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+a.getFunctionName(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":t}function d(e,t,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new s.Memo),0===n)return function(e){var t=Object.prototype.toString.call(e);if("string"==typeof e)return e;if("[object Object]"===t)return"[Object]";if("[object Array]"===t)return"[Array]";var n=p(e);return i.isPrimitive(n)?n:t}(t);if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var o=p(t,e);if(i.isPrimitive(o))return o;var a=c(t),u=Array.isArray(t)?[]:{};if(r.memoize(t))return"[Circular ~]";for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(u[l]=d(l,a[l],n-1,r));return r.unmemoize(t),u}function h(e,t){try{return JSON.parse(JSON.stringify(e,(function(e,n){return d(e,n,t)})))}catch(e){return"**non-serializable**"}}t.fill=function(e,t,n){if(t in e){var r=e[t],o=n(r);if("function"==typeof o)try{o.prototype=o.prototype||{},Object.defineProperties(o,{__sentry_original__:{enumerable:!1,value:r}})}catch(e){}e[t]=o}},t.urlEncode=function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},t.normalizeToSize=function e(t,n,r){void 0===n&&(n=3),void 0===r&&(r=102400);var o=h(t,n);return l(o)>r?e(t,n-1,r):o},t.walk=d,t.normalize=h,t.extractExceptionKeysForMessage=function(e,t){void 0===t&&(t=40);var n=Object.keys(c(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return u.truncate(n[0],t);for(var r=n.length;r>0;r--){var o=n.slice(0,r).join(", ");if(!(o.length>t))return r===n.length?o:u.truncate(o,t)}return""},t.dropUndefinedKeys=function e(t){var n,o;if(i.isPlainObject(t)){var s=t,a={};try{for(var u=r.__values(Object.keys(s)),c=u.next();!c.done;c=u.next()){var l=c.value;void 0!==s[l]&&(a[l]=e(s[l]))}}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return a}return Array.isArray(t)?t.map(e):t}}).call(this,n(8))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++){if(this._inner[t]===e)return!0}return this._inner.push(e),!1},e.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},e}();t.Memo=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=n(6);function i(){if(!("fetch"in o.getGlobalObject()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function s(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}t.supportsErrorEvent=function(){try{return new ErrorEvent(""),!0}catch(e){return!1}},t.supportsDOMError=function(){try{return new DOMError(""),!0}catch(e){return!1}},t.supportsDOMException=function(){try{return new DOMException(""),!0}catch(e){return!1}},t.supportsFetch=i,t.isNativeFetch=s,t.supportsNativeFetch=function(){if(!i())return!1;var e=o.getGlobalObject();if(s(e.fetch))return!0;var t=!1,n=e.document;if(n&&"function"==typeof n.createElement)try{var a=n.createElement("iframe");a.hidden=!0,n.head.appendChild(a),a.contentWindow&&a.contentWindow.fetch&&(t=s(a.contentWindow.fetch)),n.head.removeChild(a)}catch(e){r.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t},t.supportsReportingObserver=function(){return"ReportingObserver"in o.getGlobalObject()},t.supportsReferrerPolicy=function(){if(!i())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}},t.supportsHistory=function(){var e=o.getGlobalObject(),t=e.chrome,n=t&&t.app&&t.app.runtime,r="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5);!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(r||(r={}));var i=function(){function e(e){var t=this;this._state=r.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(r.RESOLVED,e)},this._reject=function(e){t._setResult(r.REJECTED,e)},this._setResult=function(e,n){t._state===r.PENDING&&(o.isThenable(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._attachHandler=function(e){t._handlers=t._handlers.concat(e),t._executeHandlers()},this._executeHandlers=function(){if(t._state!==r.PENDING){var e=t._handlers.slice();t._handlers=[],e.forEach((function(e){e.done||(t._state===r.RESOLVED&&e.onfulfilled&&e.onfulfilled(t._value),t._state===r.REJECTED&&e.onrejected&&e.onrejected(t._value),e.done=!0)}))}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.resolve=function(t){return new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){return new e((function(n,r){if(Array.isArray(t))if(0!==t.length){var o=t.length,i=[];t.forEach((function(t,s){e.resolve(t).then((function(e){i[s]=e,0===(o-=1)&&n(i)})).then(null,r)}))}else n([]);else r(new TypeError("Promise.all requires an array as input."))}))},e.prototype.then=function(t,n){var r=this;return new e((function(e,o){r._attachHandler({done:!1,onfulfilled:function(n){if(t)try{return void e(t(n))}catch(e){return void o(e)}else e(n)},onrejected:function(t){if(n)try{return void e(n(t))}catch(e){return void o(e)}else o(t)}})}))},e.prototype.catch=function(e){return this.then((function(e){return e}),e)},e.prototype.finally=function(t){var n=this;return new e((function(e,r){var o,i;return n.then((function(e){i=!1,o=e,t&&t()}),(function(e){i=!0,o=e,t&&t()})).then((function(){i?r(o):e(o)}))}))},e.prototype.toString=function(){return"[object SyncPromise]"},e}();t.SyncPromise=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(0),i=function(){function e(e){this.errors=0,this.sid=o.uuid4(),this.duration=0,this.status=r.SessionStatus.Ok,this.init=!0,this.ignoreDuration=!1;var t=o.timestampInSeconds();this.timestamp=t,this.started=t,e&&this.update(e)}return e.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||o.timestampInSeconds(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:o.uuid4()),void 0!==e.init&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof e.duration)this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):this.status===r.SessionStatus.Ok?this.update({status:r.SessionStatus.Exited}):this.update()},e.prototype.toJSON=function(){return o.dropUndefinedKeys({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:o.dropUndefinedKeys({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}();t.Session=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(2),i=n(0),s=n(24),a=n(30);t.API_VERSION=4;var u=function(){function e(e,n,r){void 0===n&&(n=new s.Scope),void 0===r&&(r=t.API_VERSION),this._version=r,this._stack=[{}],this.getStackTop().scope=n,e&&this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=s.Scope.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var n=this._lastEventId=i.uuid4(),o=t;if(!t){var s=void 0;try{throw new Error("Sentry syntheticException")}catch(e){s=e}o={originalException:e,syntheticException:s}}return this._invokeClient("captureException",e,r.__assign(r.__assign({},o),{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var o=this._lastEventId=i.uuid4(),s=n;if(!n){var a=void 0;try{throw new Error(e)}catch(e){a=e}s={originalException:e,syntheticException:a}}return this._invokeClient("captureMessage",e,t,r.__assign(r.__assign({},s),{event_id:o})),o},e.prototype.captureEvent=function(e,t){var n=i.uuid4();return"transaction"!==e.type&&(this._lastEventId=n),this._invokeClient("captureEvent",e,r.__assign(r.__assign({},t),{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),o=n.scope,s=n.client;if(o&&s){var a=s.getOptions&&s.getOptions()||{},u=a.beforeBreadcrumb,c=void 0===u?null:u,l=a.maxBreadcrumbs,p=void 0===l?100:l;if(!(p<=0)){var d=i.dateTimestampInSeconds(),h=r.__assign({timestamp:d},e),f=c?i.consoleSandbox((function(){return c(h,t)})):h;null!==f&&o.addBreadcrumb(f,p)}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;n&&r&&e(n)},e.prototype.run=function(e){var t=l(this);try{e(this)}finally{l(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return i.logger.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},e.prototype.endSession=function(){var e,t,n,r,o;null===(n=null===(t=null===(e=this.getStackTop())||void 0===e?void 0:e.scope)||void 0===t?void 0:t.getSession())||void 0===n||n.close(),this._sendSessionUpdate(),null===(o=null===(r=this.getStackTop())||void 0===r?void 0:r.scope)||void 0===o||o.setSession()},e.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,s=t.client,u=s&&s.getOptions()||{},c=u.release,l=u.environment,p=(i.getGlobalObject().navigator||{}).userAgent,d=new a.Session(r.__assign(r.__assign(r.__assign({release:c,environment:l},n&&{user:n.getUser()}),p&&{userAgent:p}),e));if(n){var h=n.getSession&&n.getSession();h&&h.status===o.SessionStatus.Ok&&h.update({status:o.SessionStatus.Exited}),this.endSession(),n.setSession(d)}return d},e.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var r=t.getSession&&t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},e.prototype._invokeClient=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=this.getStackTop(),s=i.scope,a=i.client;a&&a[e]&&(t=a)[e].apply(t,r.__spread(n,[s]))},e.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=c(),o=r.__SENTRY__;if(o&&o.extensions&&"function"==typeof o.extensions[e])return o.extensions[e].apply(this,t);i.logger.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function c(){var e=i.getGlobalObject();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function l(e){var t=c(),n=d(t);return h(t,e),n}function p(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function d(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new u),e.__SENTRY__.hub}function h(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}t.Hub=u,t.getMainCarrier=c,t.makeMain=l,t.getCurrentHub=function(){var e=c();return p(e)&&!d(e).isOlderThan(t.API_VERSION)||h(e,new u),i.isNodeEnv()?function(e){var n,r,o;try{var i=null===(o=null===(r=null===(n=c().__SENTRY__)||void 0===n?void 0:n.extensions)||void 0===r?void 0:r.domain)||void 0===o?void 0:o.active;if(!i)return d(e);if(!p(i)||d(i).isOlderThan(t.API_VERSION)){var a=d(e).getStackTop();h(i,new u(a.client,s.Scope.clone(a.scope)))}return d(i)}catch(t){return d(e)}}(e):d(e)},t.getActiveDomain=function(){i.logger.warn("Function `getActiveDomain` is deprecated and will be removed in a future version.");var e=c().__SENTRY__;return e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active},t.getHubFromCarrier=d,t.setHubOnCarrier=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(0),i=function(){function e(){}return e.prototype.sendEvent=function(e){return o.SyncPromise.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:r.Status.Skipped})},e.prototype.close=function(e){return o.SyncPromise.resolve(!0)},e}();t.NoopTransport=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(0),s=n(82),a=n(7),u=n(19),c=function(e){function t(t){void 0===t&&(t={});return t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:o.SDK_VERSION}],version:o.SDK_VERSION},e.call(this,s.BrowserBackend,t)||this}return r.__extends(t,e),t.prototype.showReportDialog=function(e){void 0===e&&(e={}),i.getGlobalObject().document&&(this._isEnabled()?a.injectReportDialog(r.__assign(r.__assign({},e),{dsn:e.dsn||this.getDsn()})):i.logger.error("Trying to call showReportDialog with Sentry Client disabled"))},t.prototype._prepareEvent=function(t,n,r){return t.platform=t.platform||"javascript",e.prototype._prepareEvent.call(this,t,n,r)},t.prototype._sendEvent=function(t){var n=this.getIntegration(u.Breadcrumbs);n&&n.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},t}(o.BaseClient);t.BrowserClient=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(17);function i(e){var t=s(e.stack),n={type:e.name,value:e.message};return t&&t.length&&(n.stacktrace={frames:t}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function s(e){if(!e||!e.length)return[];var t=e,n=t[0].func||"",r=t[t.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==r.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}})).reverse()}t.exceptionFromStacktrace=i,t.eventFromPlainObject=function(e,t,n){var i={exception:{values:[{type:r.isEvent(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+r.extractExceptionKeysForMessage(e)}]},extra:{__serialized__:r.normalizeToSize(e)}};if(t){var a=s(o.computeStackTrace(t).stack);i.stacktrace={frames:a}}return i},t.eventFromStacktrace=function(e){return{exception:{values:[i(e)]}}},t.prepareFramesForEvent=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(18);t.BaseTransport=r.BaseTransport;var o=n(83);t.FetchTransport=o.FetchTransport;var i=n(84);t.XHRTransport=i.XHRTransport},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=o.getGlobalObject();function s(){var e,t;if(r)return r;if(o.isNativeFetch(i.fetch))return r=i.fetch.bind(i);var n=i.document,s=i.fetch;if("function"==typeof(null===(e=n)||void 0===e?void 0:e.createElement))try{var a=n.createElement("iframe");a.hidden=!0,n.head.appendChild(a),(null===(t=a.contentWindow)||void 0===t?void 0:t.fetch)&&(s=a.contentWindow.fetch),n.head.removeChild(a)}catch(e){o.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return r=s.bind(i)}t.getNativeFetchImplementation=s,t.sendReport=function(e,t){if("[object Navigator]"===Object.prototype.toString.call(i&&i.navigator)&&"function"==typeof i.navigator.sendBeacon)return i.navigator.sendBeacon.bind(i.navigator)(e,t);if(o.supportsFetch()){var n=s();return o.forget(n(e,{body:t,method:"POST",credentials:"omit",keepalive:!0}))}}},function(e,t,n){e.exports=n(38)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(39),i=(r=o)&&r.__esModule?r:{default:r};t.default=i.default,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=f(n(40)),s=f(n(50)),a=f(n(51)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(21)),c=n(9),l=n(52),p=n(22),d=f(n(23)),h=f(n(53));function f(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=p.VIDEO,_=p.AUDIO,y=function(){function e(t,r){var o=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(v(this,e),l.debug&&((0,c.enableLogs)(!0),window.humanTime=u.humanTime),c.logger.info("[mse-player]:",e.version),this.opts=l||{},this.media=t,this.url=r,this.firstStart=!0,this.opts.progressUpdateTime=this.opts.progressUpdateTime||500,this.opts.errorsBeforeStop=this.opts.errorsBeforeStop?this.opts.errorsBeforeStop:1,"number"!=typeof this.opts.errorsBeforeStop||isNaN(this.opts.errorsBeforeStop))throw new Error("invalid errorsBeforeStop param, should be number");if(this.opts.connectionRetries=this.opts.connectionRetries||0,"number"!=typeof this.opts.connectionRetries||isNaN(this.opts.connectionRetries))throw new Error("invalid connectionRetries param, should be number");if(this.opts.wsReconnect=!!this.opts.wsReconnect&&this.opts.wsReconnect,"boolean"!=typeof this.opts.wsReconnect)throw new Error("invalid wsReconnect param, should be boolean");if(this.opts.preferHQ=!!this.opts.preferHQ&&this.opts.preferHQ,"boolean"!=typeof this.opts.preferHQ)throw new Error("invalid preferHQ param, should be boolean");if(this.opts.onCrashTryVideoOnly=this.opts.onCrashTryVideoOnly||!0,"boolean"!=typeof this.opts.onCrashTryVideoOnly)throw new Error("invalid onCrashTryVideoOnly param, should be boolean");if(this.retry=0,this.retryConnectionTimer,this.opts.retryMuted=!!this.opts.retryMuted&&this.opts.retryMuted,"boolean"!=typeof this.opts.retryMuted)throw new Error("invalid retryMuted param, should be boolean");this.opts.maxBufferDelay=this.opts.maxBufferDelay?this.opts.maxBufferDelay:2;var p=navigator.userAgent;if((/Edge/.test(p)||/trident.*rv:1\d/i.test(p))&&(this.opts.maxBufferDelay=10),"number"!=typeof this.opts.maxBufferDelay)throw new Error("invalid maxBufferDelay param, should be number");if(this.opts.videoQuality){if("string"!=typeof this.opts.videoQuality)throw new Error("invalid videoQuality param, should be string");if("highest"!==this.opts.videoQuality&&"lowest"!==this.opts.videoQuality)throw new Error("invalid videoQuality param, should be highest or lowest")}try{this.Sentry=n(54)}catch(e){this.noSentry=!0}if(this.opts.sentryConfig=this.opts.sentryConfig?this.opts.sentryConfig:"","string"!=typeof this.opts.sentryConfig)throw new Error("invalid sentryConfig param, should be string");if(this.opts.sentryConfig.length&&!this.noSentry&&(this.Sentry.init({dsn:this.opts.sentryConfig,environment:"production",release:"Mse Player@"+e.version}),document.onerror=function(e){o.Sentry.captureException(e)}),this.resetStats=function(){o.playerStatsObject={proto:"mseld",user_agent:navigator.userAgent,bytes:0,player:{player_type:"mseld_player",player_version:e.version,stall_count:0,pause_count:0,error_count:0,reconnect_count:0,bitrate_change_count:0,playback_duration:0,stall_duration:0,pause_duration:0,bytes_played:0}},o.addStat(o.playerStatsObject)},this.opts.statsSendEnable=!!this.opts.statsSendEnable&&this.opts.statsSendEnable,"number"!=typeof this.opts.maxBufferDelay)throw new Error("invalid maxBufferDelay param, should be number");if(window.Worker){if(this.statsWorker=new a.default,this.statsWorker.onmessage=this.onStatsWorkerMessage.bind(this),this.opts.statsSendTime){if("number"!=typeof this.opts.statsSendTime)throw new Error("invalid statsSendTime param, should be number");this.statsWorker.postMessage({command:"time",commandObj:this.opts.statsSendTime})}this.statsWorker.postMessage({command:"start",commandObj:this.url})}this.onProgress=l&&l.onProgress,l&&l.onDisconnect?this.onDisconnect=l&&l.onDisconnect:this.onDisconnect=function(e){c.logger.log("[websocket status]:",e)},this.onMediaInfo=l&&l.onMediaInfo,this.onError=l&&l.onError,this.onEventCallback=l&&l.onEvent,this.onAutoplay=l&&l.onAutoplay,this.onMuted=l&&l.onMuted,this.onStats=l&&l.onStats,this.onMessage=l&&l.onMessage,this.onPause=l&&l.onPause,this.onResume=l&&l.onResume,t instanceof HTMLMediaElement&&(t.WebKitPlaysInline=!0,t.controls=!1),this.ws=new i.default({message:this.dispatchMessage.bind(this),closed:this.onDisconnect.bind(this),error:this.onError,wsReconnect:this.opts.wsReconnect}),this.sb=new s.default({media:t}),this.messageTime=Date.now(),this.init()}return e.replaceHttpByWS=function(e){return u.replaceHttpByWS(e)},e.isSupported=function(){return u.isSupportedMSE()},o(e,null,[{key:"version",get:function(){return"22.2.1"}}]),e.prototype.play=function(e,t){var n=this;if(c.logger.log("[mse-player]: play()"),this.playing)c.logger.log("MSE is already playing");else{if(!this.ws||!this.ws.websocket||this._pause)return this._play(e,t).then((function(){n.playing=!0,n._stop=!1,n.pendingTracks&&(n.setTracks(n.pendingTracks),n.pendingTracks=void 0)})).catch((function(e){n.onPlayerError(e),c.logger.error("[mse-player]: got error on play",e),n.playing=!1}));c.logger.log("[mse-player]: websocket already opened")}},e.prototype.stop=function(){var e=this;this.playPromise?(this.onEvent({key:Date.now(),data:{event:"play_stop"}}),this.playerStatsObject.closed_at=Date.now(),this.addStat({closed_at:this.playerStatsObject.closed_at}),this.addStat({event:"play_stop"}),this.opts.statsSendEnable&&this.ws.sendStats(this.getStats()),this.playPromise.catch((function(){if(e.resetTimer&&(clearTimeout(e.resetTimer),e.resetTimer=void 0),!e._stop)return e.onMediaDetaching();c.logger.log("[mse-player]: already stopped")})).finally((function(){if(e.resetTimer&&(clearTimeout(e.resetTimer),e.resetTimer=void 0),!e._stop)return e.onMediaDetaching();c.logger.log("[mse-player]: already stopped")}))):c.logger.log("[mse-player]: no playPromise exists, nothing to stop"),this.firstStart=!0,delete this.playbackSegmentStart,delete this.uuid},e.prototype.pause=function(){if(!function(){if(this._pause||!this.playing||!this.media||!this.ws||!this.mediaSource||this.mediaSource&&"open"!==this.mediaSource.readyState||!this.playPromise)return!1;return!0}.bind(this)())return c.logger.log("[mse:playback] can not do pause");var e=function(){if(this.ws.pause(),this.media.pause(),this._pause=!0,this.playing=!1,this.addPlayerStat("pause_count"),this.pauseStarted=Date.now(),this.onPause)try{this.onPause()}catch(e){c.logger.error("Error "+e.name+":"+e.message+"\n"+e.stack)}}.bind(this);this.playPromise.then(e,e).catch(e,e)},e.prototype.restart=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?void 0:this.sb.lastLoadedUTC;this.playing=!1,this.ws.destroy(),this.ws.init(),this.ws.start(this.url,t,this.videoTrack,this.audioTrack),this.addPlayerStat("reconnect_count"),this.onEndStalling()},e.prototype.retryConnection=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.retry>=this.opts.connectionRetries?clearInterval(this.retryConnectionTimer):(c.logger.log("%cconnectionRetry:","background: orange;","Retrying "+(this.retry+1)),this.mediaSource=void 0,this.init(),this.ws.destroy(),this.sb.destroy(),this.play(t,n).then((function(){e.onEndStalling()})),this.retry=this.retry+1)},e.prototype.setTracks=function(e){var t=this,n=e;if(this.mediaInfo){if("lowest"===n)n=this.autoTrackSelection(!1);else if("highest"===n)n=this.autoTrackSelection(!0);else if(!Array.isArray(n))return void c.logger.error('tracks should be an Array instance: ["v1", "a1"]');if(this.playing){var r=this.mediaInfo.streams?"streams":"tracks",o=n.filter((function(e){var n=t.mediaInfo[r].find((function(t){return e===t.track_id}));return!!n&&n.content===g})).join(""),i=n.filter((function(e){var n=t.mediaInfo[r].find((function(t){return e===t.track_id}));return n?!!n&&n.content===_:null})).join("");if(!i.length&&!o.length){c.logger.warn("No such stream tracks! Setting to default parameters");var s=this.getVideoTracks(),a=this.getAudioTracks();a.length?i=a[0].track_id:c.logger.warn("No audio tracks"),s.length?o=s[0].track_id:c.logger.warn("No video tracks")}i.length||(this.sb.sourceBuffer.audio&&this.sb.removeSourceBuffer(),this.media.muted=!0,c.logger.warn("No audio tracks")),o.length&&i.length&&this.mediaSource.sourceBuffers.length<=1&&(this.stop(),this.media.muted=!1,this.play()),this.onStartStalling(),this.ws.setTracks(o,i),this.addPlayerStat("bitrate_change_count"),this.videoTrack=o,this.audioTrack=i,this._setTracksFlag=!0,this.waitForInitFrame=!0}else this.pendingTracks=n}else c.logger.warn("Media info did not loaded. Should try after onMediaInfo triggered or inside.")},e.prototype.autoTrackSelection=function(e){if(this.mediaInfo){var t=this.getVideoTracks(),n=this.getAudioTracks(),r=void 0,o=void 0;if(e){var i=void 0,s=void 0;t[0].bitrate?s="bitrate":t[0].pixel_width&&(s="pixel_width"),i=t[0][s],r=t[0].track_id,t.forEach((function(e){e[s]>i&&(i=e[s],r=e.track_id)})),n.length&&(o=n[0].track_id,n.forEach((function(e){e.sample_rate>i&&(o=e.track_id)})))}else{var a=void 0,u=void 0;if(t[0].bitrate?u="bitrate":t[0].pixel_width&&(u="pixel_width"),a=t[0][u],r=t[0].track_id,t.forEach((function(e){e[u]<a&&(a=e[u],r=e.track_id)})),n.length){var l=void 0;l=n[0].sample_rate,o=n[0].track_id,n.forEach((function(e){e.sample_rate<l&&(l=e.sample_rate,o=e.track_id)}))}}var p=[];return r&&r.length&&p.push(r),o&&o.length&&p.push(o),p}c.logger.warn("Media info did not loaded. Should try after onMediaInfo triggered or inside.")},e.prototype._play=function(e,t){var n=this;return this.liveError=!1,new Promise((function(r,o){if(c.logger.log("_play",e,t),n.playing){var i="[mse-player] _play: terminate because already has been playing";return c.logger.log(i),r({message:i})}if(n._pause){if(n.ws&&!1===n.ws.opened)return c.logger.log("WebSocket Closed, trying to restart it"),n._pause=!1,void n.restart(!0);if(c.logger.log("WebSocket is in opened state, resuming"),n._pause=!1,n._resume(),n.pauseStarted){var s=n.playerStatsObject.player;if(s){var a=s.pause_duration;a+=Date.now()-n.pauseStarted,n.addPlayerStat("pause_duration",a),delete n.pauseStarted}}return n.playPromise=n.media.play(),c.logger.log("_play: terminate because _paused and should resume"),n.playPromise}if(n.resetStats(),n.playerStatsObject.opened_at=Date.now(),n.uuid=n.generateUUID(),n.addStat({opened_at:n.playerStatsObject.opened_at,id:n.uuid}),n.videoTrack=e,n.audioTrack=t,n._pause=!1,n.mediaSource||n.onAttachMedia({media:n.media}).then((function(){n.onsoa=n._play.bind(n,e,t),n.sb.setMediaSource(n.mediaSource),n.mediaSource.addEventListener(d.default.MEDIA_SOURCE_SOURCE_OPEN,n.onsoa),c.logger.warn("mediaSource did not create"),n.resolveThenMediaSourceOpen=n.resolveThenMediaSourceOpen?n.resolveThenMediaSourceOpen:r,n.rejectThenMediaSourceOpen=n.rejectThenMediaSourceOpen?n.rejectThenMediaSourceOpen:o})),n.mediaSource&&"open"!==n.mediaSource.readyState)return c.logger.warn('readyState is not "open", it\'s currently ',n.mediaSource.readyState),n.shouldPlay=!0,n.resolveThenMediaSourceOpen=n.resolveThenMediaSourceOpen?n.resolveThenMediaSourceOpen:r,void(n.rejectThenMediaSourceOpen=n.rejectThenMediaSourceOpen?n.rejectThenMediaSourceOpen:o);new Promise((function(e,t){return!n.media.autoplay||!0===n.media.muted||n.opts.retryMuted?e():!n.onAutoplay||function(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod","Safari"];if(navigator.platform)for(;e.length;)if(navigator.platform===e.pop())return!0;return!1}()?(n.media.muted=!0,e()):(n.onAutoplay((function(){return n.media.muted=!1,e()})),void t())})).then((function(){n.ws.start(n.url,n.playTime,n.videoTrack,n.audioTrack).then((function(){return n.playPromise=n.media.play(),n.playPromise.then((function(){n.onStartStalling(),n.startProgressTimer(),n.resolveThenMediaSourceOpen&&(n._stop=!1,n.resolveThenMediaSourceOpen(),n.resolveThenMediaSourceOpen=void 0,n.rejectThenMediaSourceOpen=void 0,clearInterval(n.retryConnectionTimer),n.retry=0),n.onEvent({key:Date.now(),data:{event:"play_started"}})})).catch((function(r){if(c.logger.log("playPromise rejection.",r),n.ws.connectionPromise&&n.ws.connectionPromise.then((function(){return n.ws.destroy()})),n.opts.retryMuted&&0==n.media.muted&&(n.onMuted&&n.onMuted(),n.media.muted=!0,n._play(e,t)),n.onPlayerError({error:"play_promise_reject",err:r}),n.rejectThenMediaSourceOpen&&(n.rejectThenMediaSourceOpen(),n.resolveThenMediaSourceOpen=void 0,n.rejectThenMediaSourceOpen=void 0),n.opts.retryMuted||n.stop(),n.opts.onCrashTryVideoOnly){var o=n.mediaInfo.activeStreams.video;o&&n._play(o)}})),n.playPromise}))}))}))},e.prototype.init=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._pause=!1,this.playing=!1,this.shouldPlay=!1,this.audioTrack="",this.videoTrack="",this.endProgressTimer(),t||this.onEvent({key:Date.now(),data:{event:"play_init",userInfo:window.navigator.userAgent,playerInfo:"MSEPlayer"+(e.version?"@"+e.version:"")}})},e.prototype._resume=function(){this.ws.resume(),this.onEvent({key:Date.now(),data:{event:"play_websocket_resume"}})},e.prototype.onMediaDetaching=function(){var e=this;if(this.stopRunning)c.logger.warn("stop is running.");else{if(this.stopRunning=!0,this.handlerMediaDetaching.bind(this),!this.playPromise)return this.handlerMediaDetaching();this.playPromise.catch((function(){return e.handlerMediaDetaching()})).finally((function(){return e.handlerMediaDetaching()}))}},e.prototype.handlerMediaDetaching=function(){var e=this;return c.logger.info("media source detaching"),new Promise((function(t,n){if(e.removeMediaSource(),!e.media)return n("no media to detach");e.removeListeners(),e.oncvp=null,e.mediaSource=null,e.init(!0),e.ws.destroy(),e.sb.destroy(),e.media.onemptied=function(){return c.logger.log("[mse-player]: media emptied"),e.stopRunning=!1,e._stop=!0,delete e.playPromise,t()}}))},e.prototype.removeMediaSource=function(){var e=this,t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(e){c.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}t.removeEventListener(d.default.MEDIA_SOURCE_SOURCE_OPEN,this.onmso),t.removeEventListener(d.default.MEDIA_SOURCE_SOURCE_ENDED,this.onmse),t.removeEventListener(d.default.MEDIA_SOURCE_SOURCE_CLOSE,this.onmsc),this.onmso=null,this.onmse=null,this.onmsc=null}var n=function(){e.media.src="",e.media.load(),e.resetTimer&&(clearTimeout(e.resetTimer),e.resetTimer=void 0)};this.playPromise&&this.playPromise.then((function(){n()})).catch((function(){n()}))},e.prototype.onMediaElementEmptied=function(e){return this.onMediaElementEmptied&&this.media&&(this.media.removeEventListener(d.default.MEDIA_ELEMENT_EMPTIED,this.onMediaElementEmptied),this._onmee=void 0),e},e.prototype.onAttachMedia=function(e){var t=this;this.media=e.media;var n=this.media;if(!(n instanceof HTMLMediaElement))throw new Error(h.default.NOT_HTML_MEDIA_ELEMENT);if(n){var r=this.mediaSource=new MediaSource;return this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener(d.default.MEDIA_SOURCE_SOURCE_ENDED,this.onmse),r.addEventListener(d.default.MEDIA_SOURCE_SOURCE_CLOSE,this.onmsc),n.src=URL.createObjectURL(r),this.eventLog=function(e){t.onEvent&&t.onEvent(e)},this.addListeners(),this.liveError?void(this.player=void 0):new Promise((function(e){t.onmso=t.onMediaSourceOpen.bind(t,e),r.addEventListener(d.default.MEDIA_SOURCE_SOURCE_OPEN,t.onmso)}))}},e.prototype.onMediaSourceOpen=function(e){e();var t=this.mediaSource;t&&t.removeEventListener(d.default.MEDIA_SOURCE_SOURCE_OPEN,this.onmso),URL.revokeObjectURL(this.media.src),this.shouldPlay&&(this.shouldPlay=!1,c.logger.info("readyState now is "+this.mediaSource.readyState+", and will be played",this.audioTrack,this.videoTrack),this._play(this.audioTrack,this.videoTrack))},e.prototype.onDisconnect=function(e){this.onEvent({key:Date.now(),data:{event:"play_diconnected"}}),this.opts.onDisconnect&&this.opts.onDisconnect(e)},e.prototype.dispatchMessage=function(e){var t=this;if(!this.stopRunning){this.playerStatsObject.first_byte_at||(this.playerStatsObject.first_byte_at=Date.now(),this.addStat({first_byte_at:this.playerStatsObject.first_byte_at}));var n=e.rawData,r=e.parsedData,o=e.isDataAB;try{if(o){if(this.waitForInitFrame)return c.logger.log("old frames");this.sb.procArrayBuffer(n)}if(r&&r.type===l.EVENT_SEGMENT){var i=r[l.EVENT_SEGMENT];switch(c.logger.log("%c "+r.type+" "+("event"===r.type?r.event:"mse_init_segment"),"background: aquamarine;",r),i){case"resumed":this._pause&&!this.playing&&this.onStartStalling(),this.onResume&&this.onResume();break;case"paused":break;case"seeked":case"switched_to_live":if(this.seekValue=void 0,this.opts.onSeeked)try{this.opts.onSeeked()}catch(e){c.logger.error(e)}break;case"recordings_ended":this._eos=!0,this.sb.onBufferEos();break;case"stream_unavailable":"static"in r&&0==r.static?(c.logger.info("Stream is on on demand mode, waiting for init segment"),this.onStartStalling()):(c.logger.warn("do playPromise reject with error"),this.ws.connectionPromise&&this.ws.connectionPromise.then((function(){return t.ws.pause()})),this.liveError||(this.onPlayerError({error:"playPromise reject - stream unavaible"}),this.liveError=!0),this.rejectThenMediaSourceOpen&&(this.rejectThenMediaSourceOpen(),this.resolveThenMediaSourceOpen=void 0,this.rejectThenMediaSourceOpen=void 0),this.playPromise=Promise.reject("stream unavaible"),this.mediaSource.endOfStream());break;case"tracks_switched":break;default:this.opts.onEvent&&this.opts.onEvent({error:"unhandled_event",event:i}),c.logger.warn("unknown type of event",i)}return}if(r&&r.type===l.MSE_INIT_SEGMENT)return this.procInitSegment(n)}catch(e){u.showDispatchError.bind(this)(e);try{if(this.media.error)this.onPlayerError({error:"Media error",mediaError:this.media.error}),this.stop();else if(this.mediaInfo&&this.mediaInfo.activeStreams){var s=this.mediaInfo.activeStreams;this.setTracks([s.video?s.video:"",s.audio?s.audio:""])}}catch(e){this.ws.pause()}}}},e.prototype.procInitSegment=function(t){var n=this,o=JSON.parse(t);if(o.type!==l.MSE_INIT_SEGMENT)return c.logger.warn("type is not "+l.MSE_INIT_SEGMENT);this.waitForInitFrame&&(this.waitForInitFrame=!1),this.resetTimer&&(clearTimeout(this.resetTimer),this.resetTimer=void 0),this.sb.isBuffered()&&(this.sb.doFlush(),this.sb.seek()),this.sb.setTracksByType(o);var i=r({},o.metadata,{tracks:o.metadata.streams?o.metadata.streams:o.metadata.tracks,streams:o.metadata.streams?o.metadata.streams:o.metadata.tracks}),s=o.metadata.streams;o.metadata.tracks&&(s=o.metadata.tracks);var a={},u=this.sb.videoTrackId&&this.sb.videoTrackId.id-1;if(s[u]&&s[u].track_id){if(s[u].bitrate&&0===s[u].bitrate||0===s[u].height||0===s[u].width)return void this.onPlayerError({error:"Video track error"});a.video=s[u].track_id}var p=this.sb.audioTrackId&&this.sb.audioTrackId.id-1;if(p&&s[p]&&s[p].track_id)if(s[p].bitrate&&0===s[p].bitrate){this.onPlayerError({error:"Audio track error"});var d=void 0;o.tracks.forEach((function(e,t){e.id===n.sb.audioTrackId.id&&(d=t)})),o.tracks.splice(d,1),this.sb.sourceBuffer.audio&&(this.mediaSource.removeSourceBuffer(this.sb.sourceBuffer.audio),delete this.sb.sourceBuffer.audio)}else a.audio=s[p].track_id;var h=r({},i,{activeStreams:a,version:e.version});if(this.playerStatsObject.source_id=o.session_id,this.addStat({source_id:this.playerStatsObject.source_id}),this.doMediaInfo(h),c.logger.log("%cprocInitSegment:","background: lightpink;",o),this.onEvent({key:Date.now(),data:r({event:"play_metadata"},h)}),this.mediaSource&&!this.mediaSource.sourceBuffers.length&&(this.sb.setMediaSource(this.mediaSource),this.sb.createSourceBuffers(o)),this.liveError||this.sb.createTracks(o.tracks),this.opts.videoQuality&&this.firstStart){var f=void 0;if("lowest"===this.opts.videoQuality?f=this.autoTrackSelection(!1):"highest"===this.opts.videoQuality&&(f=this.autoTrackSelection(!0)),f[0]!==a.video||a.audio&&f[1]!==a.audio)return void this.ws.setTracks(f[0]||"",f[1]||"");this.firstStart=!1}this.opts.preferHQ&&c.logger.info("[MSE]: preferHQ option is depricated. Use videoQuality(lowest/highest) instead"),this.ws.resume()},e.prototype.doMediaInfo=function(e){if(c.logger.log("%cmediaInfo:","background: orange;",e),this.mediaInfo=e,this.onMediaInfo)try{this.onMediaInfo(e)}catch(e){c.logger.error(u.errorMsg(e))}},e.prototype.getVideoTracks=function(){if(this.mediaInfo){var e=this.mediaInfo.streams?"streams":"tracks";return this.mediaInfo[e].filter((function(e){return e.content===g}))}},e.prototype.getAudioTracks=function(){if(this.mediaInfo){var e=this.mediaInfo.streams?"streams":"tracks";return this.mediaInfo[e].filter((function(e){return e.content===_}))}},e.prototype.immediateLevelSwitchEnd=function(){var e=this,t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,this.previouslyPaused||(this.playPromise=t.play(),this.playPromise.then((function(){e._pause=!1,e.playing=!0}))))},e.prototype.onStartStalling=function(){var e=this;this._pause||(this.resetTimer||(this.resetTimer=setTimeout((function(){e.restart()}),6e4)),this._stalling||(this.opts.onStartStalling&&this.opts.onStartStalling(),this._stalling=!0,c.logger.log("onStartStalling"),this.playerStatsObject.started_at&&(this.addPlayerStat("stall_count"),this.startStallingTime=Date.now()),this.onEvent({key:Date.now(),data:{event:"play_stalled"}})))},e.prototype.onEndStalling=function(){if(this._stalling){if(this.opts.onEndStalling&&this.opts.onEndStalling(),this._stalling=!1,c.logger.log("onEndStalling"),clearTimeout(this.resetTimer),this.resetTimer=void 0,this.startStallingTime){var e=this.playerStatsObject.player;if(e){var t=e.stall_duration;t+=Date.now()-this.startStallingTime,this.startStallingTime=null,this.addPlayerStat("stall_duration",t)}}this.onEvent({key:Date.now(),data:{event:"play_resumed"}})}},e.prototype.startProgressTimer=function(){this.timer=setInterval(this.onTimer.bind(this),this.opts.progressUpdateTime)},e.prototype.endProgressTimer=function(){clearInterval(this.timer),this.timer=void 0},e.prototype.onTimer=function(){if(this._eos)return c.logger.log("nothing to play");if(this.immediateSwitch&&this.immediateLevelSwitchEnd(),this.sb.lastLoadedUTC!==this.utcPrev&&!this._stalling&&(this.utcPrev=this.sb.lastLoadedUTC,this.onProgress))try{this.onProgress(this.sb.lastLoadedUTC)}catch(e){c.logger.error(u.errorMsg(e))}},e.prototype.onMediaSourceEnded=function(){c.logger.log("media source ended");try{this.opts.onEOS&&this.opts.onEOS()}catch(e){c.logger.error("error while proccessing onEOS")}},e.prototype.onMediaSourceClose=function(){c.logger.log("media source closed")},e.prototype.onConnectionRetry=function(){var e=this;this.retryConnectionTimer||this._stop?this.retry>=this.opts.connectionRetries&&clearInterval(this.retryConnectionTimer):this.retry<this.opts.connectionRetries&&(this.retryConnectionTimer=setInterval((function(){return e.retryConnection()}),5e3))},e.prototype.loadingIndication=function(e){var t=e.type;"playing"===t?(this.playing=!0,this.onEndStalling(),this.playerStatsObject.started_at||(this.playerStatsObject.started_at=Date.now(),this.addStat({started_at:this.playerStatsObject.started_at})),this.playbackSegmentStart=Date.now()):"waiting"===t&&(this.playing=!1,this.onStartStalling(),delete this.playbackSegmentStart)},e.prototype.onEvent=function(e){this.onEventCallback&&this.onEventCallback(e)},e.prototype.onPlayerError=function(e){this.playerStatsObject&&this.addPlayerStat("error_count"),this.onError&&this.onError(e)},e.prototype.addListeners=function(){this.media&&(this.oncvp=u.checkVideoProgress(this.media,this).bind(this),this.media.addEventListener(d.default.MEDIA_ELEMENT_PROGRESS,this.oncvp),this.media.addEventListener(d.default.MEDIA_ELEMENT_PLAYING,this.loadingIndication.bind(this)),this.media.addEventListener(d.default.MEDIA_ELEMENT_WAITING,this.loadingIndication.bind(this)))},e.prototype.removeListeners=function(){this.media&&(this.media.removeEventListener(d.default.MEDIA_ELEMENT_PROGRESS,this.oncvp),this.media.removeEventListener(d.default.MEDIA_ELEMENT_PLAYING,this.loadingIndication),this.media.removeEventListener(d.default.MEDIA_ELEMENT_WAITING,this.loadingIndication))},e.prototype.generateUUID=function(){var e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var r=16*Math.random();return e>0?(r=(e+r)%16|0,e=Math.floor(e/16)):(r=(t+r)%16|0,t=Math.floor(t/16)),("x"===n?r:3&r|8).toString(16)}))},e.prototype.addPlayerStat=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.playerStatsObject.player;n&&(t?n[e]=t:n[e]++,this.playerStatsObject.player=n,this.addStat({player:n}))},e.prototype.addStat=function(e){this.statsWorker&&this.statsWorker.postMessage({command:"add",commandObj:e})},e.prototype.getStats=function(){return r({},this.playerStatsObject,{id:this.uuid})},e.prototype.onStatsWorkerMessage=function(e){if(this.opts.statsSendEnable){var t=e.data;this.ws.sendStats(t)}},e}();t.default=y,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWSURL=u;var r=s(n(41)),o=s(n(48)),i=n(9);function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opts=t,this.init(),this.onwso=this.open.bind(this),this.onwsm=this.handleReceiveMessage.bind(this),this.onwse=this.handleError.bind(this),this.onwsc=this.onWSClose.bind(this)}return e.prototype.init=function(){this.wsWorker&&delete this.wsWorker,this.opened=!1,this.connectionPromise=void 0,clearTimeout(this.reconnect),this.reconnect=void 0,window.Worker&&(this.wsWorker=new o.default,this.wsWorker.onmessage=this.onWorkerMessage.bind(this))},e.prototype.onWorkerMessage=function(e){var t=e.data;switch(t.command){case"connect":this.open();break;case"close":this.onWSClose(t);break;case"error":this.handleError(t);break;default:this.handleReceiveMessage(t)}},e.prototype.start=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return this.connectionPromise=new Promise((function(i,s){n.socketURL={url:e,time:t,videoTrack:r,audioTack:o};var a=u(e,t,r,o);n.wsWorker.postMessage({command:"start",commandObj:a}),n._openingResolve=i,n._openingReject=s})),this.connectionPromise},e.prototype.open=function(){this.opened=!0,this.paused=!0,this._openingResolve()},e.prototype.send=function(e){this.wsWorker.postMessage({command:"send",commandObj:e})},e.prototype.resume=function(){clearTimeout(this.reconnect),i.logger.log("ws: send resume"),this.send("resume"),this.paused=!1},e.prototype.pause=function(){i.logger.log("ws: send pause"),this.send("pause"),this.paused=!0},e.prototype.seek=function(e){var t="live"===e?"":"play_from=";i.logger.log(""+t+e),this.send(""+t+e)},e.prototype.setTracks=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.send("set_tracks="+e+t)},e.prototype.sendStats=function(e){var t=JSON.stringify(e);this.send(t)},e.prototype.handleReceiveMessage=function(e){this.opts.message(e)},e.prototype.handleError=function(){var e;this.opts.error&&(e=this.opts).error.apply(e,arguments)},e.prototype.onWSClose=function(e){var t=this;if(i.logger.log("WebSocket lost connection with code ",e.code+" and reason: "+e.reason),this.opts.error&&this.opts.error({error:"WebSocket lost connection",err:"WebSocket lost connection with code "+e.code+" and reason: "+e.reason,code:e.code}),this.opts.wsReconnect)if(e.wasClean&&1e3!==e.code&&1006!==e.code)i.logger.log("Clean websocket stop"),this.destroy();else{var n=this.socketURL,r=n.url,o=n.videoTrack,s=n.audioTack;this.reconnect=setTimeout((function(){t.start(r,o,s).then((function(){clearTimeout(t.reconnect)})).catch((function(){t.destroy()}))}),5e3)}this.opts.closed&&this.opts.closed(e)},e.prototype.destroy=function(){this.wsWorker.postMessage({command:"disconnect"}),clearTimeout(this.reconnect),this.reconnect=void 0,this.init()},e}();function u(e,t,n,o){var s=(0,r.default)({url:e}),a="";s.query&&(a=s.query.split("&").map((function(e){return e.split("=")})).filter((function(e){return"from"!==e[0]&&"tracks"!==e[0]})).map((function(e){return e.join("=")})).join("&"),i.logger.log(a));var u=!!n||!!o,c="";return s.protocol+"//"+s.host+s.pathname+"?"+(u?"tracks="+n+o:"")+c+(u&&a?"&":"")+a}t.default=a},function(e,t,n){"use strict";
/*!
 * parseurl
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(42),o=r.parse,i=r.Url;function s(e){var t=e.url;if(void 0!==t){var n=e._parsedUrl;return u(t,n)?n:((n=a(t))._raw=t,e._parsedUrl=n)}}function a(e){if("string"!=typeof e||47!==e.charCodeAt(0))return o(e);for(var t=e,n=null,r=null,s=1;s<e.length;s++)switch(e.charCodeAt(s)){case 63:null===r&&(t=e.substring(0,s),n=e.substring(s+1),r=e.substring(s));break;case 9:case 10:case 12:case 13:case 32:case 35:case 160:case 65279:return o(e)}var a=void 0!==i?new i:{};return a.path=e,a.href=e,a.pathname=t,null!==r&&(a.query=n,a.search=r),a}function u(e,t){return"object"==typeof t&&null!==t&&(void 0===i||t instanceof i)&&t._raw===e}e.exports=s,e.exports.original=function(e){var t=e.originalUrl;if("string"!=typeof t)return s(e);var n=e._parsedOriginalUrl;if(u(t,n))return n;return(n=a(t))._raw=t,e._parsedOriginalUrl=n}},function(e,t,n){"use strict";var r=n(43),o=n(44);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=m,t.resolve=function(e,t){return m(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?m(e,!1,!0).resolveObject(t):t},t.format=function(e){o.isString(e)&&(e=m(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),p=["%","/","?",";","#"].concat(l),d=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(45);function m(e,t,n){if(e&&o.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}i.prototype.parse=function(e,t,n){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),a=-1!==i&&i<e.indexOf("#")?"?":"#",c=e.split(a);c[0]=c[0].replace(/\\/g,"/");var m=e=c.join(a);if(m=m.trim(),!n&&1===e.split("#").length){var b=u.exec(m);if(b)return this.path=m,this.href=m,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var S=s.exec(m);if(S){var E=(S=S[0]).toLowerCase();this.protocol=E,m=m.substr(S.length)}if(n||S||m.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===m.substr(0,2);!w||S&&g[S]||(m=m.substr(2),this.slashes=!0)}if(!g[S]&&(w||S&&!_[S])){for(var O,x,T=-1,k=0;k<d.length;k++){-1!==(j=m.indexOf(d[k]))&&(-1===T||j<T)&&(T=j)}-1!==(x=-1===T?m.lastIndexOf("@"):m.lastIndexOf("@",T))&&(O=m.slice(0,x),m=m.slice(x+1),this.auth=decodeURIComponent(O)),T=-1;for(k=0;k<p.length;k++){var j;-1!==(j=m.indexOf(p[k]))&&(-1===T||j<T)&&(T=j)}-1===T&&(T=m.length),this.host=m.slice(0,T),m=m.slice(T),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var P=this.hostname.split(/\./),I=(k=0,P.length);k<I;k++){var R=P[k];if(R&&!R.match(h)){for(var D="",A=0,C=R.length;A<C;A++)R.charCodeAt(A)>127?D+="x":D+=R[A];if(!D.match(h)){var N=P.slice(0,k),B=P.slice(k+1),U=R.match(f);U&&(N.push(U[1]),B.unshift(U[2])),B.length&&(m="/"+B.join(".")+m),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=r.toASCII(this.hostname));var L=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+L,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==m[0]&&(m="/"+m))}if(!v[E])for(k=0,I=l.length;k<I;k++){var H=l[k];if(-1!==m.indexOf(H)){var q=encodeURIComponent(H);q===H&&(q=escape(H)),m=m.split(H).join(q)}}var W=m.indexOf("#");-1!==W&&(this.hash=m.substr(W),m=m.slice(0,W));var G=m.indexOf("?");if(-1!==G?(this.search=m.substr(G),this.query=m.substr(G+1),t&&(this.query=y.parse(this.query)),m=m.slice(0,G)):t&&(this.search="",this.query={}),m&&(this.pathname=m),_[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){L=this.pathname||"";var V=this.search||"";this.path=L+V}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(m(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(o.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){for(var p=Object.keys(e),d=0;d<p.length;d++){var h=p[d];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",y=n.search||"";n.path=v+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),S=b||m||n.host&&e.pathname,E=S,w=n.pathname&&n.pathname.split("/")||[],O=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!_[n.protocol]);if(O&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),S=S&&(""===f[0]||""===w[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(O)n.hostname=n.host=w.shift(),(M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=M.shift(),n.host=n.hostname=M.shift());return n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=w.slice(-1)[0],T=(n.host||e.host||w.length>1)&&("."===x||".."===x)||""===x,k=0,j=w.length;j>=0;j--)"."===(x=w[j])?w.splice(j,1):".."===x?(w.splice(j,1),k++):k&&(w.splice(j,1),k--);if(!S&&!E)for(;k--;k)w.unshift("..");!S||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),T&&"/"!==w.join("/").substr(-1)&&w.push("");var M,P=""===w[0]||w[0]&&"/"===w[0].charAt(0);O&&(n.hostname=n.host=P?"":w.length?w.shift():"",(M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=M.shift(),n.host=n.hostname=M.shift()));return(S=S||n.host&&w.length)&&!P&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,r){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,f=String.fromCharCode;function v(e){throw new RangeError(d[e])}function g(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function _(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+g((e=e.replace(p,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function m(e){return g(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e)})).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function S(e,t,n){var r=0;for(e=n?h(e/700):e>>1,e+=h(e/t);e>455;r+=36)e=h(e/35);return h(r+36*e/(e+38))}function E(e){var t,n,r,o,i,s,a,c,l,p,d,f=[],g=e.length,_=0,y=128,b=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&v("not-basic"),f.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<g;){for(i=_,s=1,a=36;o>=g&&v("invalid-input"),((c=(d=e.charCodeAt(o++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||c>h((u-_)/s))&&v("overflow"),_+=c*s,!(c<(l=a<=b?1:a>=b+26?26:a-b));a+=36)s>h(u/(p=36-l))&&v("overflow"),s*=p;b=S(_-i,t=f.length+1,0==i),h(_/t)>u-y&&v("overflow"),y+=h(_/t),_%=t,f.splice(_++,0,y)}return m(f)}function w(e){var t,n,r,o,i,s,a,c,l,p,d,g,_,m,E,w=[];for(g=(e=y(e)).length,t=128,n=0,i=72,s=0;s<g;++s)(d=e[s])<128&&w.push(f(d));for(r=o=w.length,o&&w.push("-");r<g;){for(a=u,s=0;s<g;++s)(d=e[s])>=t&&d<a&&(a=d);for(a-t>h((u-n)/(_=r+1))&&v("overflow"),n+=(a-t)*_,t=a,s=0;s<g;++s)if((d=e[s])<t&&++n>u&&v("overflow"),d==t){for(c=n,l=36;!(c<(p=l<=i?1:l>=i+26?26:l-i));l+=36)E=c-p,m=36-p,w.push(f(b(p+E%m,0))),c=h(E/m);w.push(f(b(c,0))),i=S(n,_,r==o),n=0,++r}++n,++t}return w.join("")}a={version:"1.4.1",ucs2:{decode:y,encode:m},decode:E,encode:w,toASCII:function(e){return _(e,(function(e){return l.test(e)?"xn--"+w(e):e}))},toUnicode:function(e){return _(e,(function(e){return c.test(e)?E(e.slice(4).toLowerCase()):e}))}},void 0===(o=function(){return a}.call(t,n,t,e))||(e.exports=o)}()}).call(this,n(10)(e),n(8))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(46),t.encode=t.stringify=n(47)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var p,d,h,f,v=e[l].replace(a,"%20"),g=v.indexOf(n);g>=0?(p=v.substr(0,g),d=v.substr(g+1)):(p=v,d=""),h=decodeURIComponent(p),f=decodeURIComponent(d),r(s,h)?o(s[h])?s[h].push(f):s[h]=[s[h],f]:s[h]=f}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(s(e),(function(s){var a=encodeURIComponent(r(s))+n;return o(e[s])?i(e[s],(function(e){return a+encodeURIComponent(r(e))})).join(t):a+encodeURIComponent(r(e[s]))})).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,i.default)('!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n){!function(){let e=null,n=!1;function t(){self.postMessage({command:"connect",msg:"Connected"})}function o(e){const n=e.data,t=n instanceof ArrayBuffer,o=t?void 0:JSON.parse(n);self.postMessage({rawData:n,parsedData:o,isDataAB:t})}function r(e){const n={command:"error",msg:JSON.stringify(e)};self.postMessage(n)}function s(e){if(n)return;const{code:t,reason:o}=e,r={command:"close",data:{code:t,reason:o}};self.postMessage(r)}self.addEventListener("message",(function(a){let c=a.data,f=c.command;var u,i;"start"===f?(i=c.commandObj,e=new WebSocket(i),e.binaryType="arraybuffer",e.onopen=t,e.onmessage=o,e.onerror=r,e.onclose=s):"disconnect"===f?function(){e&&e.close();n=!0;self.postMessage({command:"disconnect",msg:"Disconnected"})}():"send"===f&&(u=c.commandObj,e.send(u))}),!1)}()}]);',"Worker",void 0,n.p+"ws.worker.js")};var r,o=n(20),i=(r=o)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelfScope=function(){return"undefined"==typeof window?self:window}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),o=n(9),i=n(22),s=n(23);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),o.logger.log("create BuffersController"),this.media=t.media,this.init(t),this.doArrayBuffer=r.doArrayBuffer.bind(this),this.maybeAppend=this.maybeAppend.bind(this),this.onSBUpdateEnd=this.onSBUpdateEnd.bind(this),this.onAudioSBUpdateEnd=this.onAudioSBUpdateEnd.bind(this)}return e.prototype.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.flushRange=[],this.appended=0,this.mediaSource=e.mediaSource,this.segmentsVideo=[],this.segmentsAudio=[],this.sourceBuffer={},this.totalBytesCollected=0},e.prototype.setMediaSource=function(e){this.mediaSource=e},e.prototype.createSourceBuffers=function(e){var t=this,n=this.sourceBuffer;e.tracks.forEach((function(e){var r=e.content===i.VIDEO,o=r?'video/mp4; codecs="avc1.4d401f"':'audio/mp4; codecs="mp4a.40.2"';e.mime_type&&(o=e.mime_type),n[e.content]=t.mediaSource.addSourceBuffer(o),n[e.content].mode="segments";var a=n[e.content];r?a.addEventListener(s.BUFFER_UPDATE_END,t.onSBUpdateEnd):a.addEventListener(s.BUFFER_UPDATE_END,t.onAudioSBUpdateEnd)}))},e.prototype.onSBUpdateEnd=function(){if(this._needsEos&&this.checkEos(),!this._needsFlush&&this.segmentsVideo.length){var e=this.sourceBuffer.video;if(e){if(e.updating)return;var t=this.segmentsVideo[0];e.appendBuffer(t.data),this.segmentsVideo.shift(),this.videoBufferSize=this.videoBufferSize-t.data.byteLength,this.appended++}}},e.prototype.onAudioSBUpdateEnd=function(){if(this._needsEos&&this.checkEos(),!this._needsFlush&&this.segmentsAudio.length){var e=this.sourceBuffer.audio;if(e){if(e.updating)return;var t=this.segmentsAudio[0];e.appendBuffer(t.data),this.segmentsAudio.shift(),this.appended++}}},e.prototype.createTracks=function(e){var t=this;e.forEach((function(e){var n=(0,r.base64ToArrayBuffer)(e.payload),o={type:t.getTypeBytrackId(e.id),isInit:!0,data:n};t.maybeAppend(o)}))},e.prototype.maybeAppend=function(e){if(!this._needsFlush){if(!this.media||this.media.error)return"audio"===e.type?this.segmentsAudio=[]:this.segmentsVideo=[],o.logger.error("trying to append although a media error occured, flush segment and abort"),void(this.media.error&&o.logger.error("Error code:",this.media.error));var t=this.sourceBuffer[e.type];if(t){if(t.updating)return;t.appendBuffer(e.data),"audio"===e.type?this.segmentsAudio.shift():this.segmentsVideo.shift(),this.appended++}}},e.prototype.setTracksByType=function(e){var t=this,n=e.tracks?"tracks":"streams";1===e[n].length&&(this.audioTrackId=null),e[n].forEach((function(e,n){t[e.content===i.VIDEO?"videoTrackId":"audioTrackId"]={index:n,id:e.id}}))},e.prototype.getTypeBytrackId=function(e){return this.audioTrackId&&this.audioTrackId.id===e?i.AUDIO:i.VIDEO},e.prototype.procArrayBuffer=function(e){var t=this.rawDataToSegmnet(e);"audio"===t.type?this.segmentsAudio.push(t):this.segmentsVideo.push(t),this.totalBytesCollected=this.totalBytesCollected+t.data.byteLength,this.doArrayBuffer(t),this.sourceBuffer&&(this.sourceBuffer.video&&!this.sourceBuffer.video.updating&&this.onSBUpdateEnd(),this.audioTrackId&&this.sourceBuffer.audio&&!this.sourceBuffer.audio.updating&&this.onAudioSBUpdateEnd())},e.prototype.seek=function(){for(var e in this.sourceBuffer)this.sourceBuffer[e].abort(),this.sourceBuffer[e].mode="segments"},e.prototype.isBuffered=function(){var e=0,t=this.sourceBuffer;for(var n in t)e+=t[n].buffered.length;return e>0},e.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n)t+=n[r].buffered.length}catch(e){o.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this._setTracksFlag=!1}},e.prototype.flushBuffer=function(e,t,n){var r=void 0,i=void 0,s=void 0,a=void 0,u=void 0,c=void 0,l=this.sourceBuffer;if(Object.keys(l).length){if(o.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var p in l)if(!n||p===n){if((r=l[p]).ended=!1,r.updating)return o.logger.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<r.buffered.length;i++)if(s=r.buffered.start(i),a=r.buffered.end(i),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(u=e,c=t):(u=Math.max(s,e),c=Math.min(a,t)),Math.min(c,a)-u>.5)return this.flushBufferCounter++,o.logger.log("flush "+p+" ["+u+","+c+"], of ["+s+","+a+"], pos:"+this.media.currentTime),r.remove(u,c),!1}catch(e){o.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else o.logger.warn("abort flushing too many retries");o.logger.log("buffer flushed")}return!0},e.prototype.rawDataToSegmnet=function(e){var t=new Uint8Array(e),n=(0,r.getTrackId)(t);return{type:this.getTypeBytrackId(n),data:t}},e.prototype.onBufferEos=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.sourceBuffer,n=e.type;for(var r in t)n&&r!==n||t[r].ended||(t[r].ended=!0,o.logger.log(r+" sourceBuffer now EOS"));this.checkEos()},e.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var r=e[n];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}o.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){o.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},e.prototype.addSourceBuffer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"audio",t=this.sourceBuffer,n="video"===e?'video/mp4; codecs="avc1.4d401f"':'audio/mp4; codecs="mp4a.40.2"';t[e]=this.mediaSource.addSourceBuffer(n),t[e].mode="segments";var r=t[e];"video"===e?r.addEventListener(s.BUFFER_UPDATE_END,this.onSBUpdateEnd):r.addEventListener(s.BUFFER_UPDATE_END,this.onAudioSBUpdateEnd)},e.prototype.removeSourceBuffer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"audio",t=this.sourceBuffer[e];"audio"===e?t.removeEventListener(s.BUFFER_UPDATE_END,this.onAudioSBUpdateEnd):t.removeEventListener(s.BUFFER_UPDATE_END,this.onSBUpdateEnd),this.mediaSource.removeSourceBuffer(t),delete this.sourceBuffer[e]},e.prototype.destroy=function(){this.init()},e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,i.default)('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){!function(){let e=null,t=6e4,n={},r=null;function o(){clearInterval(r)}self.addEventListener("message",(function(a){let c=a.data;const{command:i,commandObj:u}=c;switch(i){case"start":e=u.replace(/ws:/,"http:").replace(/wss:/,"https:").replace(/mse_ld/,"session"),function(){r=this.setInterval(()=>{fetch(e,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(n)})},t)}();break;case"time":t=u;break;case"stop":o();break;case"add":!function(e){n={...n,...e},e.event&&"play_stop"===e.event&&o()}(u)}}),!1)}()}]);',"Worker",void 0,n.p+"stats.worker.js")};var r,o=n(20),i=(r=o)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EVENT_SEGMENT="event",t.MSE_INIT_SEGMENT="mse_init_segment",t.MSE_MEDIA_SEGMENT="mse_media_segment"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={NOT_HTML_MEDIA_ELEMENT:"media should be an HTMLMediaElement instance"},e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);r.__exportStar(n(55),t);var o=n(3),i=n(0),s=n(19),a=n(35);t.Transports=a;var u={},c=i.getGlobalObject();c.Sentry&&c.Sentry.Integrations&&(u=c.Sentry.Integrations);var l=r.__assign(r.__assign(r.__assign({},u),o.Integrations),s);t.Integrations=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.Severity=r.Severity,t.Status=r.Status;var o=n(3);t.addGlobalEventProcessor=o.addGlobalEventProcessor,t.addBreadcrumb=o.addBreadcrumb,t.captureException=o.captureException,t.captureEvent=o.captureEvent,t.captureMessage=o.captureMessage,t.configureScope=o.configureScope,t.getHubFromCarrier=o.getHubFromCarrier,t.getCurrentHub=o.getCurrentHub,t.Hub=o.Hub,t.makeMain=o.makeMain,t.Scope=o.Scope,t.startTransaction=o.startTransaction,t.SDK_VERSION=o.SDK_VERSION,t.setContext=o.setContext,t.setExtra=o.setExtra,t.setExtras=o.setExtras,t.setTag=o.setTag,t.setTags=o.setTags,t.setUser=o.setUser,t.withScope=o.withScope;var i=n(33);t.BrowserClient=i.BrowserClient;var s=n(7);t.injectReportDialog=s.injectReportDialog;var a=n(16);t.eventFromException=a.eventFromException,t.eventFromMessage=a.eventFromMessage;var u=n(91);t.defaultIntegrations=u.defaultIntegrations,t.forceLoad=u.forceLoad,t.init=u.init,t.lastEventId=u.lastEventId,t.onLoad=u.onLoad,t.showReportDialog=u.showReportDialog,t.flush=u.flush,t.close=u.close,t.wrap=u.wrap;var c=n(92);t.SDK_NAME=c.SDK_NAME},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Debug=2]="Debug",e[e.Verbose=3]="Verbose"}(t.LogLevel||(t.LogLevel={}))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"}(t.SessionStatus||(t.SessionStatus={})),function(e){e.Ok="ok",e.Errored="errored",e.Crashed="crashed"}(t.RequestSessionStatus||(t.RequestSessionStatus={}))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(t.Severity||(t.Severity={})),function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;case"log":default:return e.Log}}}(t.Severity||(t.Severity={}))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.Invalid="invalid",e.Failed="failed"}(t.Status||(t.Status={})),function(e){e.fromHttpCode=function(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}}(t.Status||(t.Status={}))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Explicit="explicitly_set",e.Sampler="client_sampler",e.Rate="client_rate",e.Inheritance="inheritance"}(t.TransactionSamplingMethod||(t.TransactionSamplingMethod={}))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BeforeSend="before_send",e.EventProcessor="event_processor",e.NetworkError="network_error",e.QueueOverflow="queue_overflow",e.RateLimitBackoff="ratelimit_backoff",e.SampleRate="sample_rate"}(t.Outcome||(t.Outcome={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(4);function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=o.getCurrentHub();if(i&&i[e])return i[e].apply(i,r.__spread(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}t.captureException=function(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return i("captureException",e,{captureContext:t,originalException:e,syntheticException:n})},t.captureMessage=function(e,t){var n;try{throw new Error(e)}catch(e){n=e}var o="string"!=typeof t?{captureContext:t}:void 0;return i("captureMessage",e,"string"==typeof t?t:void 0,r.__assign({originalException:e,syntheticException:n},o))},t.captureEvent=function(e){return i("captureEvent",e)},t.configureScope=function(e){i("configureScope",e)},t.addBreadcrumb=function(e){i("addBreadcrumb",e)},t.setContext=function(e,t){i("setContext",e,t)},t.setExtras=function(e){i("setExtras",e)},t.setTags=function(e){i("setTags",e)},t.setExtra=function(e,t){i("setExtra",e,t)},t.setTag=function(e,t){i("setTag",e,t)},t.setUser=function(e){i("setUser",e)},t.withScope=function(e){i("withScope",e)},t._callOnClient=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];i.apply(void 0,r.__spread(["_invokeClient",e],t))},t.startTransaction=function(e,t){return i("startTransaction",r.__assign({},e),t)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.forget=function(e){e.then(null,(function(e){console.error(e)}))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(11),i=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,s=function(){function e(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}return e.prototype.toString=function(e){void 0===e&&(e=!1);var t=this,n=t.host,r=t.path,o=t.pass,i=t.port,s=t.projectId;return t.protocol+"://"+t.publicKey+(e&&o?":"+o:"")+"@"+n+(i?":"+i:"")+"/"+(r?r+"/":r)+s},e.prototype._fromString=function(e){var t=i.exec(e);if(!t)throw new o.SentryError("Invalid Dsn");var n=r.__read(t.slice(1),6),s=n[0],a=n[1],u=n[2],c=void 0===u?"":u,l=n[3],p=n[4],d=void 0===p?"":p,h="",f=n[5],v=f.split("/");if(v.length>1&&(h=v.slice(0,-1).join("/"),f=v.pop()),f){var g=f.match(/^\d+/);g&&(f=g[0])}this._fromComponents({host:l,pass:c,path:h,projectId:f,port:d,protocol:s,publicKey:a})},e.prototype._fromComponents=function(e){"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),this.user=e.publicKey||"",this.protocol=e.protocol,this.publicKey=e.publicKey||"",this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},e.prototype._validate=function(){var e=this;if(["protocol","publicKey","host","projectId"].forEach((function(t){if(!e[t])throw new o.SentryError("Invalid Dsn: "+t+" missing")})),!this.projectId.match(/^\d+$/))throw new o.SentryError("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new o.SentryError("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new o.SentryError("Invalid Dsn: Invalid port "+this.port)},e}();t.Dsn=s},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setPrototypeOf=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1),i=n(5),s=n(12),a=n(6),u=n(26),c=n(15),l=n(28),p=a.getGlobalObject(),d={},h={};function f(e){if(!h[e])switch(h[e]=!0,e){case"console":!function(){if(!("console"in p))return;["debug","info","warn","error","log","assert"].forEach((function(e){e in p.console&&u.fill(p.console,e,(function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];v("console",{args:n,level:e}),t&&Function.prototype.apply.call(t,p.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in p))return;var e=v.bind(null,"dom"),t=b(e,!0);p.document.addEventListener("click",t,!1),p.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((function(t){var n=p[t]&&p[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(u.fill(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{var i=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},s=i[n]=i[n]||{refCount:0};if(!s.handler){var a=b(e);s.handler=a,t.call(this,n,a,o)}s.refCount+=1}catch(e){}return t.call(this,n,r,o)}})),u.fill(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{var o=this.__sentry_instrumentation_handlers__||{},i=o[t];i&&(i.refCount-=1,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in p))return;var e=[],t=[],n=XMLHttpRequest.prototype;u.fill(n,"open",(function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var s=this,a=r[1];s.__sentry_xhr__={method:i.isString(r[0])?r[0].toUpperCase():r[0],url:r[1]},i.isString(a)&&"POST"===s.__sentry_xhr__.method&&a.match(/sentry_key/)&&(s.__sentry_own_request__=!0);var c=function(){if(4===s.readyState){try{s.__sentry_xhr__&&(s.__sentry_xhr__.status_code=s.status)}catch(e){}try{var n=e.indexOf(s);if(-1!==n){e.splice(n);var o=t.splice(n)[0];s.__sentry_xhr__&&void 0!==o[0]&&(s.__sentry_xhr__.body=o[0])}}catch(e){}v("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:s})}};return"onreadystatechange"in s&&"function"==typeof s.onreadystatechange?u.fill(s,"onreadystatechange",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return c(),e.apply(s,t)}})):s.addEventListener("readystatechange",c),n.apply(s,r)}})),u.fill(n,"send",(function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e.push(this),t.push(r),v("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}))}();break;case"fetch":!function(){if(!l.supportsNativeFetch())return;u.fill(p,"fetch",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={args:t,fetchData:{method:g(t),url:_(t)},startTimestamp:Date.now()};return v("fetch",o.__assign({},r)),e.apply(p,t).then((function(e){return v("fetch",o.__assign(o.__assign({},r),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw v("fetch",o.__assign(o.__assign({},r),{endTimestamp:Date.now(),error:e})),e}))}}))}();break;case"history":!function(){if(!l.supportsHistory())return;var e=p.onpopstate;function t(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=t.length>2?t[2]:void 0;if(o){var i=r,s=String(o);r=s,v("history",{from:i,to:s})}return e.apply(this,t)}}p.onpopstate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=p.location.href,i=r;if(r=o,v("history",{from:i,to:o}),e)try{return e.apply(this,t)}catch(e){}},u.fill(p.history,"pushState",t),u.fill(p.history,"replaceState",t)}();break;case"error":S=p.onerror,p.onerror=function(e,t,n,r,o){return v("error",{column:r,error:o,line:n,msg:e,url:t}),!!S&&S.apply(this,arguments)};break;case"unhandledrejection":E=p.onunhandledrejection,p.onunhandledrejection=function(e){return v("unhandledrejection",e),!E||E.apply(this,arguments)};break;default:s.logger.warn("unknown instrumentation type:",e)}}function v(e,t){var n,r;if(e&&d[e])try{for(var i=o.__values(d[e]||[]),a=i.next();!a.done;a=i.next()){var u=a.value;try{u(t)}catch(t){s.logger.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+c.getFunctionName(u)+"\nError: "+t)}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function g(e){return void 0===e&&(e=[]),"Request"in p&&i.isInstanceOf(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function _(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in p&&i.isInstanceOf(e[0],Request)?e[0].url:String(e[0])}t.addInstrumentationHandler=function(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(d[e.type]=d[e.type]||[],d[e.type].push(e.callback),f(e.type))};var y,m;function b(e,t){return void 0===t&&(t=!1),function(n){if(n&&m!==n&&!function(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===y||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(m,n))&&(e({event:n,name:r,global:t}),m=n),clearTimeout(y),y=p.setTimeout((function(){y=void 0}),1e3)}}}var S=null;var E=null},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,p=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):p=-1,c.length&&h())}function h(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++p<t;)u&&u[p].run();p=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}Object.defineProperty(t,"__esModule",{value:!0});var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;function o(e){var t=r.exec(e);return t?t.slice(1):[]}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r="",o=!1,i=e.length-1;i>=-1&&!o;i--){var s=i>=0?e[i]:"/";s&&(r=s+"/"+r,o="/"===s.charAt(0))}return(o?"/":"")+(r=n(r.split("/").filter((function(e){return!!e})),!o).join("/"))||"."}function s(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function a(e){var t=u(e),r="/"===e.substr(-1),o=n(e.split("/").filter((function(e){return!!e})),!t).join("/");return o||t||(o="."),o&&r&&(o+="/"),(t?"/":"")+o}function u(e){return"/"===e.charAt(0)}t.resolve=i,t.relative=function(e,t){e=i(e).substr(1),t=i(t).substr(1);for(var n=s(e.split("/")),r=s(t.split("/")),o=Math.min(n.length,r.length),a=o,u=0;u<o;u++)if(n[u]!==r[u]){a=u;break}var c=[];for(u=a;u<n.length;u++)c.push("..");return(c=c.concat(r.slice(a))).join("/")},t.normalizePath=a,t.isAbsolute=u,t.join=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(e.join("/"))},t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=n(29),i=function(){function e(e){this._limit=e,this._buffer=[]}return e.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},e.prototype.add=function(e){var t=this;if(!this.isReady())return o.SyncPromise.reject(new r.SentryError("Not adding Promise due to buffer limit reached."));var n=e();return-1===this._buffer.indexOf(n)&&this._buffer.push(n),n.then((function(){return t.remove(n)})).then(null,(function(){return t.remove(n).then(null,(function(){}))})),n},e.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},e.prototype.length=function(){return this._buffer.length},e.prototype.drain=function(e){var t=this;return new o.SyncPromise((function(n){var r=setTimeout((function(){e&&e>0&&n(!1)}),e);o.SyncPromise.all(t._buffer).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},e}();t.PromiseBuffer=i},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(13),i={nowSeconds:function(){return Date.now()/1e3}};var s=o.isNodeEnv()?function(){try{return o.dynamicRequire(e,"perf_hooks").performance}catch(e){return}}():function(){var e=r.getGlobalObject().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),a=void 0===s?i:{nowSeconds:function(){return(s.timeOrigin+s.now())/1e3}};t.dateTimestampInSeconds=i.nowSeconds.bind(i),t.timestampInSeconds=a.nowSeconds.bind(a),t.timestampWithMs=t.timestampInSeconds,t.usingPerformanceAPI=void 0!==s,t.browserPerformanceTimeOrigin=function(){var e=r.getGlobalObject().performance;if(e&&e.now){var n=e.now(),o=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-o):36e5,s=i<36e5,a=e.timing&&e.timing.navigationStart,u="number"==typeof a?Math.abs(a+n-o):36e5;return s||u<36e5?i<=u?(t._browserPerformanceTimeOriginMode="timeOrigin",e.timeOrigin):(t._browserPerformanceTimeOriginMode="navigationStart",a):(t._browserPerformanceTimeOriginMode="dateNow",o)}t._browserPerformanceTimeOriginMode="none"}()}).call(this,n(10)(e))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(0),i=n(31),s=function(){function e(e,t){var n=this;this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._transport=e,this._intervalId=setInterval((function(){return n.flush()}),1e3*this.flushTimeout),this._sessionAttrs=t}return e.prototype.sendSessionAggregates=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){o.logger.error("Error while sending session: "+e)})):o.logger.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.flush=function(){var e=this.getSessionAggregates();0!==e.aggregates.length&&(this._pendingAggregates={},this.sendSessionAggregates(e))},e.prototype.getSessionAggregates=function(){var e=this,t=Object.keys(this._pendingAggregates).map((function(t){return e._pendingAggregates[parseInt(t)]})),n={attrs:this._sessionAttrs,aggregates:t};return o.dropUndefinedKeys(n)},e.prototype.close=function(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()},e.prototype.incrementSessionStatusCount=function(){var e,t;if(this._isEnabled){var n=i.getCurrentHub().getScope(),r=null===(e=n)||void 0===e?void 0:e.getRequestSession();r&&r.status&&(this._incrementSessionStatusCount(r.status,new Date),null===(t=n)||void 0===t||t.setRequestSession(void 0))}},e.prototype._incrementSessionStatusCount=function(e,t){var n=new Date(t).setSeconds(0,0);this._pendingAggregates[n]=this._pendingAggregates[n]||{};var o=this._pendingAggregates[n];switch(o.started||(o.started=new Date(n).toISOString()),e){case r.RequestSessionStatus.Errored:return o.errored=(o.errored||0)+1,o.errored;case r.RequestSessionStatus.Ok:return o.exited=(o.exited||0)+1,o.exited;case r.RequestSessionStatus.Crashed:return o.crashed=(o.crashed||0)+1,o.crashed}},e}();t.SessionFlusher=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e,t,n){void 0===t&&(t={}),this.dsn=e,this._dsnObject=new r.Dsn(e),this.metadata=t,this._tunnel=n}return e.prototype.getDsn=function(){return this._dsnObject},e.prototype.forceEnvelope=function(){return!!this._tunnel},e.prototype.getBaseApiEndpoint=function(){var e=this.getDsn(),t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"},e.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},e.prototype.getStoreEndpointPath=function(){var e=this.getDsn();return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},e.prototype.getRequestHeaders=function(e,t){var n=this.getDsn(),r=["Sentry sentry_version=7"];return r.push("sentry_client="+e+"/"+t),r.push("sentry_key="+n.publicKey),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},e.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t=this.getDsn(),n=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(var o in r.push("dsn="+t.toString()),e)if("dsn"!==o)if("user"===o){if(!e.user)continue;e.user.name&&r.push("name="+encodeURIComponent(e.user.name)),e.user.email&&r.push("email="+encodeURIComponent(e.user.email))}else r.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return r.length?n+"?"+r.join("&"):n},e.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},e.prototype._getIngestEndpoint=function(e){return this._tunnel?this._tunnel:""+this.getBaseApiEndpoint()+this.getDsn().projectId+"/"+e+"/"},e.prototype._encodedAuth=function(){var e={sentry_key:this.getDsn().publicKey,sentry_version:"7"};return r.urlEncode(e)},e}();t.API=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(4),i=n(2),s=n(0),a=n(74),u=function(){function e(e,t){this._integrations={},this._numProcessing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=new s.Dsn(t.dsn))}return e.prototype.captureException=function(e,t,n){var r=this,o=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return r._captureEvent(e,t,n)})).then((function(e){o=e}))),o},e.prototype.captureMessage=function(e,t,n,r){var o=this,i=n&&n.event_id,a=s.isPrimitive(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(a.then((function(e){return o._captureEvent(e,n,r)})).then((function(e){i=e}))),i},e.prototype.captureEvent=function(e,t,n){var r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((function(e){r=e}))),r},e.prototype.captureSession=function(e){this._isEnabled()?"string"!=typeof e.release?s.logger.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1})):s.logger.warn("SDK not enabled, will not capture session.")},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.getTransport=function(){return this._getBackend().getTransport()},e.prototype.flush=function(e){var t=this;return this._isClientDoneProcessing(e).then((function(n){return t.getTransport().close(e).then((function(e){return n&&e}))}))},e.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},e.prototype.setupIntegrations=function(){this._isEnabled()&&!this._integrations.initialized&&(this._integrations=a.setupIntegrations(this._options))},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return s.logger.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype._updateSessionFromEvent=function(e,t){var n,o,s=!1,a=!1,u=t.exception&&t.exception.values;if(u){a=!0;try{for(var c=r.__values(u),l=c.next();!l.done;l=c.next()){var p=l.value.mechanism;if(p&&!1===p.handled){s=!0;break}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}}var d=e.status===i.SessionStatus.Ok;(d&&0===e.errors||d&&s)&&(e.update(r.__assign(r.__assign({},s&&{status:i.SessionStatus.Crashed}),{errors:e.errors||Number(a||s)})),this.captureSession(e))},e.prototype._sendSession=function(e){this._getBackend().sendSession(e)},e.prototype._isClientDoneProcessing=function(e){var t=this;return new s.SyncPromise((function(n){var r=0,o=setInterval((function(){0==t._numProcessing?(clearInterval(o),n(!0)):(r+=1,e&&r>=e&&(clearInterval(o),n(!1)))}),1)}))},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},e.prototype._prepareEvent=function(e,t,n){var i=this,a=this.getOptions().normalizeDepth,u=void 0===a?3:a,c=r.__assign(r.__assign({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:s.uuid4()),timestamp:e.timestamp||s.dateTimestampInSeconds()});this._applyClientOptions(c),this._applyIntegrationsMetadata(c);var l=t;n&&n.captureContext&&(l=o.Scope.clone(l).update(n.captureContext));var p=s.SyncPromise.resolve(c);return l&&(p=l.applyToEvent(c,n)),p.then((function(e){return"number"==typeof u&&u>0?i._normalizeEvent(e,u):e}))},e.prototype._normalizeEvent=function(e,t){if(!e)return null;var n=r.__assign(r.__assign(r.__assign(r.__assign(r.__assign({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return r.__assign(r.__assign({},e),e.data&&{data:s.normalize(e.data,t)})}))}),e.user&&{user:s.normalize(e.user,t)}),e.contexts&&{contexts:s.normalize(e.contexts,t)}),e.extra&&{extra:s.normalize(e.extra,t)});e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace);var o=this.getOptions()._experiments;return(void 0===o?{}:o).ensureNoCircularStructures?s.normalize(n):n},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,r=t.release,o=t.dist,i=t.maxValueLength,a=void 0===i?250:i;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==o&&(e.dist=o),e.message&&(e.message=s.truncate(e.message,a));var u=e.exception&&e.exception.values&&e.exception.values[0];u&&u.value&&(u.value=s.truncate(u.value,a));var c=e.request;c&&c.url&&(c.url=s.truncate(c.url,a))},e.prototype._applyIntegrationsMetadata=function(e){var t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=r.__spread(e.sdk.integrations||[],t))},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},e.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){s.logger.error(e)}))},e.prototype._processEvent=function(e,t,n){var r,o,a=this,u=this.getOptions(),c=u.beforeSend,l=u.sampleRate,p=this.getTransport();if(!this._isEnabled())return s.SyncPromise.reject(new s.SentryError("SDK not enabled, will not capture event."));var d="transaction"===e.type;return!d&&"number"==typeof l&&Math.random()>l?(null===(o=(r=p).recordLostEvent)||void 0===o||o.call(r,i.Outcome.SampleRate,"event"),s.SyncPromise.reject(new s.SentryError("Discarding event because it's not included in the random sample (sampling rate = "+l+")"))):this._prepareEvent(e,n,t).then((function(n){var r,o;if(null===n)throw null===(o=(r=p).recordLostEvent)||void 0===o||o.call(r,i.Outcome.EventProcessor,e.type||"event"),new s.SentryError("An event processor returned null, will not send event.");if(t&&t.data&&!0===t.data.__sentry__||d||!c)return n;var u=c(n,t);return a._ensureBeforeSendRv(u)})).then((function(t){var r,o;if(null===t)throw null===(o=(r=p).recordLostEvent)||void 0===o||o.call(r,i.Outcome.BeforeSend,e.type||"event"),new s.SentryError("`beforeSend` returned `null`, will not send event.");var u=n&&n.getSession&&n.getSession();return!d&&u&&a._updateSessionFromEvent(u,t),a._sendEvent(t),t})).then(null,(function(e){if(e instanceof s.SentryError)throw e;throw a.captureException(e,{data:{__sentry__:!0},originalException:e}),new s.SentryError("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},e.prototype._process=function(e){var t=this;this._numProcessing+=1,e.then((function(e){return t._numProcessing-=1,e}),(function(e){return t._numProcessing-=1,e}))},e.prototype._ensureBeforeSendRv=function(e){var t="`beforeSend` method has to return `null` or a valid event.";if(s.isThenable(e))return e.then((function(e){if(!s.isPlainObject(e)&&null!==e)throw new s.SentryError(t);return e}),(function(e){throw new s.SentryError("beforeSend rejected with "+e)}));if(!s.isPlainObject(e)&&null!==e)throw new s.SentryError(t);return e},e}();t.BaseClient=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(4),i=n(0);function s(e){return e.reduce((function(e,t){return e.every((function(e){return t.name!==e.name}))&&e.push(t),e}),[])}function a(e){var t=e.defaultIntegrations&&r.__spread(e.defaultIntegrations)||[],n=e.integrations,o=r.__spread(s(t));Array.isArray(n)?o=r.__spread(o.filter((function(e){return n.every((function(t){return t.name!==e.name}))})),s(n)):"function"==typeof n&&(o=n(o),o=Array.isArray(o)?o:[o]);var i=o.map((function(e){return e.name}));return-1!==i.indexOf("Debug")&&o.push.apply(o,r.__spread(o.splice(i.indexOf("Debug"),1))),o}function u(e){-1===t.installedIntegrations.indexOf(e.name)&&(e.setupOnce(o.addGlobalEventProcessor,o.getCurrentHub),t.installedIntegrations.push(e.name),i.logger.log("Integration installed: "+e.name))}t.installedIntegrations=[],t.getIntegrationsToSetup=a,t.setupIntegration=u,t.setupIntegrations=function(e){var t={};return a(e).forEach((function(e){t[e.name]=e,u(e)})),Object.defineProperty(t,"initialized",{value:!0}),t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(32),i=function(){function e(e){this._options=e,this._options.dsn||r.logger.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return e.prototype.eventFromException=function(e,t){throw new r.SentryError("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,n){throw new r.SentryError("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,(function(e){r.logger.error("Error while sending event: "+e)}))},e.prototype.sendSession=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){r.logger.error("Error while sending session: "+e)})):r.logger.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.getTransport=function(){return this._transport},e.prototype._setupTransport=function(){return new o.NoopTransport},e}();t.BaseBackend=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);function o(e){if(e.metadata&&e.metadata.sdk){var t=e.metadata.sdk;return{name:t.name,version:t.version}}}function i(e,t){return t?(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=r.__spread(e.sdk.integrations||[],t.integrations||[]),e.sdk.packages=r.__spread(e.sdk.packages||[],t.packages||[]),e):e}t.sessionToSentryRequest=function(e,t){var n=o(t),i="aggregates"in e?"sessions":"session";return{body:JSON.stringify(r.__assign(r.__assign({sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}))+"\n"+JSON.stringify({type:i})+"\n"+JSON.stringify(e),type:i,url:t.getEnvelopeEndpointWithUrlEncodedAuth()}},t.eventToSentryRequest=function(e,t){var n=o(t),s=e.type||"event",a="transaction"===s||t.forceEnvelope(),u=e.debug_meta||{},c=u.transactionSampling,l=r.__rest(u,["transactionSampling"]),p=c||{},d=p.method,h=p.rate;0===Object.keys(l).length?delete e.debug_meta:e.debug_meta=l;var f={body:JSON.stringify(n?i(e,t.metadata.sdk):e),type:s,url:a?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(a){var v=JSON.stringify(r.__assign(r.__assign({event_id:e.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}))+"\n"+JSON.stringify({type:s,sample_rates:[{id:d,rate:h}]})+"\n"+f.body;f.body=v}return f}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(0);t.initAndBind=function(e,t){var n;!0===t.debug&&o.logger.enable();var i=r.getCurrentHub();null===(n=i.getScope())||void 0===n||n.update(t.initialScope);var s=new e(t);i.bindClient(s)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_VERSION="6.13.3"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(80);t.FunctionToString=r.FunctionToString;var o=n(81);t.InboundFilters=o.InboundFilters},function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){n=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.__sentry_original__||this;return n.apply(r,e)}},e.id="FunctionToString",e}();t.FunctionToString=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(4),i=n(0),s=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],a=function(){function e(t){void 0===t&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){o.addGlobalEventProcessor((function(t){var n=o.getCurrentHub();if(!n)return t;var r=n.getIntegration(e);if(r){var i=n.getClient(),s=i?i.getOptions():{},a="function"==typeof r._mergeOptions?r._mergeOptions(s):{};return"function"!=typeof r._shouldDropEvent?t:r._shouldDropEvent(t,a)?null:t}return t}))},e.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(i.logger.warn("Event dropped due to being internal Sentry Error.\nEvent: "+i.getEventDescription(e)),!0):this._isIgnoredError(e,t)?(i.logger.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+i.getEventDescription(e)),!0):this._isDeniedUrl(e,t)?(i.logger.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+i.getEventDescription(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(i.logger.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+i.getEventDescription(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},e.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},e.prototype._isIgnoredError=function(e,t){return!(!t.ignoreErrors||!t.ignoreErrors.length)&&this._getPossibleEventMessages(e).some((function(e){return t.ignoreErrors.some((function(t){return i.isMatchingPattern(e,t)}))}))},e.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var n=this._getEventFilterUrl(e);return!!n&&t.denyUrls.some((function(e){return i.isMatchingPattern(n,e)}))},e.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var n=this._getEventFilterUrl(e);return!n||t.allowUrls.some((function(e){return i.isMatchingPattern(n,e)}))},e.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:r.__spread(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:r.__spread(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:r.__spread(this._options.ignoreErrors||[],e.ignoreErrors||[],s),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},e.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,r=void 0===n?"":n,o=t.value,s=void 0===o?"":o;return[""+s,r+": "+s]}catch(t){return i.logger.error("Cannot extract message for event "+i.getEventDescription(e)),[]}return[]},e.prototype._getLastValidUrl=function(e){var t,n;void 0===e&&(e=[]);for(var r=e.length-1;r>=0;r--){var o=e[r];if("<anonymous>"!==(null===(t=o)||void 0===t?void 0:t.filename)&&"[native code]"!==(null===(n=o)||void 0===n?void 0:n.filename))return o.filename||null}return null},e.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return this._getLastValidUrl(t)}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return this._getLastValidUrl(n)}return null}catch(t){return i.logger.error("Cannot extract url for event "+i.getEventDescription(e)),null}},e.id="InboundFilters",e}();t.InboundFilters=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(2),s=n(0),a=n(16),u=n(35),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.eventFromException=function(e,t){return a.eventFromException(this._options,e,t)},t.prototype.eventFromMessage=function(e,t,n){return void 0===t&&(t=i.Severity.Info),a.eventFromMessage(this._options,e,t,n)},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=r.__assign(r.__assign({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(t):s.supportsFetch()?new u.FetchTransport(t):new u.XHRTransport(t)},t}(o.BaseBackend);t.BrowserBackend=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(2),s=n(0),a=n(18),u=n(36),c=function(e){function t(t,n){void 0===n&&(n=u.getNativeFetchImplementation());var r=e.call(this,t)||this;return r._fetch=n,r}return r.__extends(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(o.eventToSentryRequest(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(o.sessionToSentryRequest(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;if(this._isRateLimited(e.type))return this.recordLostEvent(i.Outcome.RateLimitBackoff,e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var r={body:e.body,method:"POST",referrerPolicy:s.supportsReferrerPolicy()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add((function(){return new s.SyncPromise((function(t,o){n._fetch(e.url,r).then((function(r){var i={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:e.type,response:r,headers:i,resolve:t,reject:o})})).catch(o)}))})).then(void 0,(function(t){throw t instanceof s.SentryError?n.recordLostEvent(i.Outcome.QueueOverflow,e.type):n.recordLostEvent(i.Outcome.NetworkError,e.type),t}))},t}(a.BaseTransport);t.FetchTransport=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(2),s=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(o.eventToSentryRequest(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(o.sessionToSentryRequest(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;return this._isRateLimited(e.type)?(this.recordLostEvent(i.Outcome.RateLimitBackoff,e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429})):this._buffer.add((function(){return new s.SyncPromise((function(t,r){var o=new XMLHttpRequest;for(var i in o.onreadystatechange=function(){if(4===o.readyState){var i={"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")};n._handleResponse({requestType:e.type,response:o,headers:i,resolve:t,reject:r})}},o.open("POST",e.url),n.options.headers)n.options.headers.hasOwnProperty(i)&&o.setRequestHeader(i,n.options.headers[i]);o.send(e.body)}))})).then(void 0,(function(t){throw t instanceof s.SentryError?n.recordLostEvent(i.Outcome.QueueOverflow,e.type):n.recordLostEvent(i.Outcome.NetworkError,e.type),t}))},t}(n(18).BaseTransport);t.XHRTransport=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(2),s=n(0),a=n(16),u=n(7),c=function(){function e(t){this.name=e.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=r.__assign({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(s.logger.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(s.logger.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},e.prototype._installGlobalOnErrorHandler=function(){var t=this;this._onErrorHandlerInstalled||(s.addInstrumentationHandler({callback:function(n){var r=n.error,i=o.getCurrentHub(),c=i.getIntegration(e),l=r&&!0===r.__sentry_own_request__;if(c&&!u.shouldIgnoreOnError()&&!l){var p=i.getClient(),d=void 0===r&&s.isString(n.msg)?t._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):t._enhanceEventWithInitialFrame(a.eventFromUnknownInput(r||n.msg,void 0,{attachStacktrace:p&&p.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);s.addExceptionMechanism(d,{handled:!1,type:"onerror"}),i.captureEvent(d,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},e.prototype._installGlobalOnUnhandledRejectionHandler=function(){var t=this;this._onUnhandledRejectionHandlerInstalled||(s.addInstrumentationHandler({callback:function(n){var r=n;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch(e){}var c=o.getCurrentHub(),l=c.getIntegration(e),p=r&&!0===r.__sentry_own_request__;if(!l||u.shouldIgnoreOnError()||p)return!0;var d=c.getClient(),h=s.isPrimitive(r)?t._eventFromRejectionWithPrimitive(r):a.eventFromUnknownInput(r,void 0,{attachStacktrace:d&&d.getOptions().attachStacktrace,rejection:!0});h.level=i.Severity.Error,s.addExceptionMechanism(h,{handled:!1,type:"onunhandledrejection"}),c.captureEvent(h,{originalException:r})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},e.prototype._eventFromIncompleteOnError=function(e,t,n,r){var o,i=s.isErrorEvent(e)?e.message:e,a=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);a&&(o=a[1],i=a[2]);var u={exception:{values:[{type:o||"Error",value:i}]}};return this._enhanceEventWithInitialFrame(u,t,n,r)},e.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},e.prototype._enhanceEventWithInitialFrame=function(e,t,n,r){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var o=isNaN(parseInt(r,10))?void 0:r,i=isNaN(parseInt(n,10))?void 0:n,a=s.isString(t)&&t.length>0?t:s.getLocationHref();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:o,filename:a,function:"?",in_app:!0,lineno:i}),e},e.id="GlobalHandlers",e}();t.GlobalHandlers=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(7),s=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a=function(){function e(t){this.name=e.id,this._options=r.__assign({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype.setupOnce=function(){var e=o.getGlobalObject();(this._options.setTimeout&&o.fill(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&o.fill(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&o.fill(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&o.fill(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget)&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:s).forEach(this._wrapEventTarget.bind(this))},e.prototype._wrapTimeFunction=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0];return t[0]=i.wrap(r,{mechanism:{data:{function:o.getFunctionName(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}},e.prototype._wrapRAF=function(e){return function(t){return e.call(this,i.wrap(t,{mechanism:{data:{function:"requestAnimationFrame",handler:o.getFunctionName(e)},handled:!0,type:"instrument"}}))}},e.prototype._wrapEventTarget=function(e){var t=o.getGlobalObject(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(o.fill(n,"addEventListener",(function(t){return function(n,r,s){try{"function"==typeof r.handleEvent&&(r.handleEvent=i.wrap(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:o.getFunctionName(r),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.call(this,n,i.wrap(r,{mechanism:{data:{function:"addEventListener",handler:o.getFunctionName(r),target:e},handled:!0,type:"instrument"}}),s)}})),o.fill(n,"removeEventListener",(function(e){return function(t,n,r){var o,i=n;try{var s=null===(o=i)||void 0===o?void 0:o.__sentry_wrapped__;s&&e.call(this,t,s,r)}catch(e){}return e.call(this,t,i,r)}})))},e.prototype._wrapXHR=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this,s=["onload","onerror","onprogress","onreadystatechange"];return s.forEach((function(e){e in r&&"function"==typeof r[e]&&o.fill(r,e,(function(t){var n={mechanism:{data:{function:e,handler:o.getFunctionName(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(n.mechanism.data.handler=o.getFunctionName(t.__sentry_original__)),i.wrap(t,n)}))})),e.apply(this,t)}},e.id="TryCatch",e}();t.TryCatch=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(2),s=n(0),a=function(){function e(t){this.name=e.id,this._options=r.__assign({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&o.getCurrentHub().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:s.getEventDescription(e)},{event:e})},e.prototype.setupOnce=function(){var e=this;this._options.console&&s.addInstrumentationHandler({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._consoleBreadcrumb.apply(e,r.__spread(t))},type:"console"}),this._options.dom&&s.addInstrumentationHandler({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._domBreadcrumb.apply(e,r.__spread(t))},type:"dom"}),this._options.xhr&&s.addInstrumentationHandler({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._xhrBreadcrumb.apply(e,r.__spread(t))},type:"xhr"}),this._options.fetch&&s.addInstrumentationHandler({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._fetchBreadcrumb.apply(e,r.__spread(t))},type:"fetch"}),this._options.history&&s.addInstrumentationHandler({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._historyBreadcrumb.apply(e,r.__spread(t))},type:"history"})},e.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:i.Severity.fromString(e.level),message:s.safeJoin(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(s.safeJoin(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}o.getCurrentHub().addBreadcrumb(t,{input:e.args,level:e.level})},e.prototype._domBreadcrumb=function(e){var t,n="object"==typeof this._options.dom?this._options.dom.serializeAttribute:void 0;"string"==typeof n&&(n=[n]);try{t=e.event.target?s.htmlTreeAsString(e.event.target,n):s.htmlTreeAsString(e.event,n)}catch(e){t="<unknown>"}0!==t.length&&o.getCurrentHub().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name,global:e.global})},e.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},n=t.method,r=t.url,i=t.status_code,s=t.body;o.getCurrentHub().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:i},type:"http"},{xhr:e.xhr,input:s})}else;},e.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?o.getCurrentHub().addBreadcrumb({category:"fetch",data:e.fetchData,level:i.Severity.Error,type:"http"},{data:e.error,input:e.args}):o.getCurrentHub().addBreadcrumb({category:"fetch",data:r.__assign(r.__assign({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},e.prototype._historyBreadcrumb=function(e){var t=s.getGlobalObject(),n=e.from,r=e.to,i=s.parseUrl(t.location.href),a=s.parseUrl(n),u=s.parseUrl(r);a.path||(a=i),i.protocol===u.protocol&&i.host===u.host&&(r=u.relative),i.protocol===a.protocol&&i.host===a.host&&(n=a.relative),o.getCurrentHub().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},e.id="Breadcrumbs",e}();t.Breadcrumbs=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(0),s=n(34),a=n(17),u=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._key=t.key||"cause",this._limit=t.limit||5}return e.prototype.setupOnce=function(){o.addGlobalEventProcessor((function(t,n){var r=o.getCurrentHub().getIntegration(e);if(r){var i=r._handler&&r._handler.bind(r);return"function"==typeof i?i(t,n):t}return t}))},e.prototype._handler=function(e,t){if(!(e.exception&&e.exception.values&&t&&i.isInstanceOf(t.originalException,Error)))return e;var n=this._walkErrorTree(t.originalException,this._key);return e.exception.values=r.__spread(n,e.exception.values),e},e.prototype._walkErrorTree=function(e,t,n){if(void 0===n&&(n=[]),!i.isInstanceOf(e[t],Error)||n.length+1>=this._limit)return n;var o=a.computeStackTrace(e[t]),u=s.exceptionFromStacktrace(o);return this._walkErrorTree(e[t],t,r.__spread([u],n))},e.id="LinkedErrors",e}();t.LinkedErrors=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(0).getGlobalObject(),s=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){o.addGlobalEventProcessor((function(t){var n,s,a;if(o.getCurrentHub().getIntegration(e)){if(!i.navigator&&!i.location&&!i.document)return t;var u=(null===(n=t.request)||void 0===n?void 0:n.url)||(null===(s=i.location)||void 0===s?void 0:s.href),c=(i.document||{}).referrer,l=(i.navigator||{}).userAgent,p=r.__assign(r.__assign(r.__assign({},null===(a=t.request)||void 0===a?void 0:a.headers),c&&{Referer:c}),l&&{"User-Agent":l}),d=r.__assign(r.__assign({},u&&{url:u}),{headers:p});return r.__assign(r.__assign({},t),{request:d})}return t}))},e.id="UserAgent",e}();t.UserAgent=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(t,n){t((function(t){var o=n().getIntegration(e);if(o){try{if(o._shouldDropEvent(t,o._previousEvent))return r.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){return o._previousEvent=t}return o._previousEvent=t}return t}))},e.prototype._shouldDropEvent=function(e,t){return!!t&&(!!this._isSameMessageEvent(e,t)||!!this._isSameExceptionEvent(e,t))},e.prototype._isSameMessageEvent=function(e,t){var n=e.message,r=t.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!this._isSameFingerprint(e,t)&&!!this._isSameStacktrace(e,t))))},e.prototype._getFramesFromEvent=function(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}else if(e.stacktrace)return e.stacktrace.frames},e.prototype._isSameStacktrace=function(e,t){var n=this._getFramesFromEvent(e),r=this._getFramesFromEvent(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,(r=r).length!==n.length)return!1;for(var o=0;o<r.length;o++){var i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0},e.prototype._getExceptionFromEvent=function(e){return e.exception&&e.exception.values&&e.exception.values[0]},e.prototype._isSameExceptionEvent=function(e,t){var n=this._getExceptionFromEvent(t),r=this._getExceptionFromEvent(e);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!this._isSameFingerprint(e,t)&&!!this._isSameStacktrace(e,t)))},e.prototype._isSameFingerprint=function(e,t){var n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(e){return!1}},e.id="Dedupe",e}();t.Dedupe=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(0),s=n(33),a=n(7),u=n(19);t.defaultIntegrations=[new o.Integrations.InboundFilters,new o.Integrations.FunctionToString,new u.TryCatch,new u.Breadcrumbs,new u.GlobalHandlers,new u.LinkedErrors,new u.Dedupe,new u.UserAgent],t.init=function(e){if(void 0===e&&(e={}),void 0===e.defaultIntegrations&&(e.defaultIntegrations=t.defaultIntegrations),void 0===e.release){var n=i.getGlobalObject();n.SENTRY_RELEASE&&n.SENTRY_RELEASE.id&&(e.release=n.SENTRY_RELEASE.id)}void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0),o.initAndBind(s.BrowserClient,e),e.autoSessionTracking&&function(){if(void 0===i.getGlobalObject().document)return void i.logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");var e=o.getCurrentHub();if("function"!=typeof e.startSession||"function"!=typeof e.captureSession)return;e.startSession({ignoreDuration:!0}),e.captureSession(),i.addInstrumentationHandler({callback:function(t){var n=t.from,r=t.to;void 0!==n&&n!==r&&(e.startSession({ignoreDuration:!0}),e.captureSession())},type:"history"})}()},t.showReportDialog=function(e){void 0===e&&(e={});var t=o.getCurrentHub(),n=t.getScope();n&&(e.user=r.__assign(r.__assign({},n.getUser()),e.user)),e.eventId||(e.eventId=t.lastEventId());var i=t.getClient();i&&i.showReportDialog(e)},t.lastEventId=function(){return o.getCurrentHub().lastEventId()},t.forceLoad=function(){},t.onLoad=function(e){e()},t.flush=function(e){var t=o.getCurrentHub().getClient();return t?t.flush(e):(i.logger.warn("Cannot flush events. No client defined."),i.SyncPromise.resolve(!1))},t.close=function(e){var t=o.getCurrentHub().getClient();return t?t.close(e):(i.logger.warn("Cannot flush events and disable SDK. No client defined."),i.SyncPromise.resolve(!1))},t.wrap=function(e){return a.wrap(e)()}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_NAME="sentry.javascript.browser"}])}));